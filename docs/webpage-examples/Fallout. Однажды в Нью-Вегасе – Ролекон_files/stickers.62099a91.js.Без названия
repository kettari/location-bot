(()=>{"use strict";var e,t,s,i,r,n,a,c,o={857656:(e,t,s)=>{s.d(t,{Stickers:()=>n});var i=s(19589),r=s(105330);const n={getStickerUrl:function(e,t){let s=String(t);if(i.colorScheme.isDarkScheme()&&(s=s.replace(/b$/,"")+"b"),window.Emoji){const t=Emoji.stickersById?.[e]?.sticker[Emoji.STICKER_FIELD_IMAGES]?.[s];if(t)return t}const n={id:e,size:s};if((0,r.isMvk)()){if(window.stickers_cache){const t=window.stickers_cache.getStickerImage(e,s);if(t)return t}return window.store.stickers&&function(e,t){return e.replace(/%([^%]+?)%/g,(e=>(e=e.slice(1,-1),t.hasOwnProperty(e)?t[e]:"")))}(window.store.stickers.url_template,{id:e,size:s})}return window.getTemplate("stickers_sticker_url",n)},getStickerPopupLayer:function(e){return(0,r.isMvk)()&&window.stickers_cache?.getStickerPopupLayer(e)||[]}}},437045:(e,t,s)=>{s.d(t,{StickersAnimation:()=>r});var i=s(581197);let r=function(){let e,t,s,n=!1,a=!1,c={},o={},d={},l={};const u={};function h(e){let t=e.getAttribute("data-uid");return t||(t=Math.random().toString(32).substr(2),e.setAttribute("data-uid",t)),t}function _(e,t){u[h(e)]=t}function p(e){let t=e.getAttribute("data-uniq-id");if(!e.querySelector(".svg_sticker_animation"))return!1;let s=d[t];return s||!1}function f(e){if(u[h(e)])return;_(e,!0);let t=p(e),n=e.getAttribute("data-uniq-id");const a=e.getAttribute("data-uid");if(e.classList.contains("animation_play"))return;let l=e.getAttribute("data-animation-path"),f=e.getAttribute("data-sticker-id"),b=!1;const w=o[f];if(f&&(b=(w||l)&&g(e)),b){const u=e.getAttribute("data-animation-class")||"";let h={containers:[e],loop:!0,autoplay:!0,name:a,group:"sticker",lazyLoading:!1,className:`svg_sticker_animation ${u}`};w?h.animationData=w:h.animationUrl=l;let _=e.querySelector(".svg_sticker_animation");_&&_.remove(),t=s.loadAnimation(h),c[f]||t.then((t=>{const s=t.animationData;o[f]=s,d[n]=t,t.addEventListener("firstFrame",(()=>{const t=e.querySelector(".sticker_img");t&&(0,i.hide)(t),e.classList.add("animation_play")}),{once:!0}),t.addEventListener("destroy",(()=>{r.stopAnimation(e)}))})).catch((()=>null))}}function b(){return t().then((e=>(s=e,s)))}return{init(e){t=e.animatorLoader},checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){let t=document.getElementById("fc_msg"+e),s=t?t.querySelector(".sticker_animation"):null;r.loadAndPlaySticker(s)}},checkSettingsAndLoad:function(e){if(StickersSettings.getAutoplay()){let t=$(`.msg_id_${e} .sticker_animation`);r.loadAndPlaySticker(t)}},loadStickerInMvkIMAndPlay:function(e,t){let s="_msg"+e;t&&(s="msg_id_"+e);const i=document.querySelector(`.${s}`);let n=i?i.querySelector(".sticker_animation"):null;r.loadAndPlayStickerWithTimer(n,500)},loadAutoplayAnimationStickers:function(e){if(!s)return void b().then((()=>{r.loadAutoplayAnimationStickers(e)}));if(e){if(a)return;a=!0}if(n)return;n=!0;let t=document.querySelectorAll(".sticker_animation_autoplay");t&&each(t,(function(e,t){f(t)})),n=!1},loadAndPlaySticker:function(e){e&&(s?requestAnimationFrame((()=>{f(e)})):b().then((()=>{r.loadAndPlaySticker(e)})))},loadAndPlayStickerWithTimer:function(e,t){if(!e)return;if(l[e])return;t||(t=1e3);let s=document.getElementById(e);s?.classList.contains("sticker_animation_disabled_timer")||(l[e]=setTimeout((function(){!s&&(s=document.getElementById(e),s?.classList.contains("sticker_animation_disabled_timer"))||(r.loadAndPlaySticker(s),clearTimeout(l[e]),l[e]=!1)}),t))},reloadStickers:function(){d={}},touchStartSticker:function(t){t.addEventListener("contextmenu",r.preventContextMenu,!1),e=setTimeout((function(){r.loadAndPlaySticker(t)}),500)},touchEndSticker:function(){e&&clearTimeout(e)},preventContextMenu:function(e){e.preventDefault(),e.stopPropagation()},stopAnimation(e){const t=p(e);t&&t.pause();const s=e.getAttribute("data-uniq-id");e.classList.remove("animation_play");const r=e.querySelector(".sticker_img");r&&(0,i.show)(r),_(e,!1),delete d[s]}};function g(e){let t=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;return t<window.innerHeight&&s>=0&&"none"!==e.style.display}}()},708042:(e,t,s)=>{s.d(t,{StickersSettings:()=>i});let i={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return!!i.autoplay&&!i.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return!!window.Calls&&window.Calls.isInActiveCall}}},791233:(e,t,s)=>{s.d(t,{StickersAnimation:()=>r.StickersAnimation});var i=s(351118),r=s(437045);r.StickersAnimation.init({animatorLoader:()=>(0,i.asyncImportLoader)((()=>Promise.all([s.e(23666),s.e("langs/web/rlottie")]).then(s.bind(s,804046)).then((({LottieManager:e})=>e))))})},353679:(e,t,s)=>{s.d(t,{DEFAULT_CACHE:()=>o,ORDER_ERRORS:()=>l,ORDER_ITEM_ERRORS:()=>u,SAMPLE_RECIPIENT_ID:()=>d,STICKER_ANIMATION:()=>c,STICKER_IMAGE:()=>a,STICKER_PACK_ICON:()=>r,STICKER_PACK_THUMB:()=>n});var i=s(612831);const r={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},n={"102_png":{id:"102.png",width:102,height:102,theme:i.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:i.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:i.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:i.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:i.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:i.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:i.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:i.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:i.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:i.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:i.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:i.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},a={"64_png":{id:"64.png",width:64,height:64,theme:i.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:i.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:i.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:i.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:i.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:i.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:i.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:i.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:i.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:i.Theme.DARK}},c={[i.Theme.LIGHT]:"animation.json",[i.Theme.DARK]:"animation.b.json"},o={products:(0,i.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},d=-1;var l=function(e){return e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items",e}({}),u=function(e){return e.DUPLICATE_PRODUCT="duplicate_product",e}({})},612831:(e,t,s)=>{s.d(t,{ProductsByType:()=>u,Theme:()=>i,UserProductStateKey:()=>c,createProductsMap:()=>a,imageSizeCache:()=>n,imageSizesIndex:()=>r,isBasePack:()=>o,isPackProduct:()=>l,isStyleProduct:()=>d});var i=function(e){return e.LIGHT="light",e.DARK="dark",e.DEFAULT="light",e}({});const r=Symbol(),n=Symbol(),a=e=>new Map(e);var c=function(e){return e.IsNew="is_new",e}({});const o=e=>void 0!==e.sticker_ids,d=e=>void 0!==e.base_id,l=e=>o(e)&&!d(e);class u{add(e){e&&(l(e)?this.pack.add(e):d(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},847771:(e,t,s)=>{s.d(t,{getStickerAnimationUrl:()=>l,getStickerImageUrl:()=>d,getStickerPackIconUrl:()=>u,isSampleOrderItem:()=>h,logStickersError:()=>_});var i=s(612831),r=s(353679),n=s(298077);const a=(e,t,s,r=i.Theme.DEFAULT)=>{const n=window.devicePixelRatio,a=[t*=n,s*=n,r].toString();let c=e[i.imageSizeCache];if(c&&c.has(a)){const e=c.get(a);if(e)return e}c||(c=new Map,e[i.imageSizeCache]=c);const o=(e=>{let t=e[i.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[i.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===r)),d=o.find((e=>e.width>=t&&e.height>=s))||o[o.length-1];return c.set(a,d),d},c=(e,t,s=i.Theme.DEFAULT)=>a(r.STICKER_IMAGE,e,t,s),o=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function d(e,t,s,r=i.Theme.DEFAULT){if(e.render?.images){const{images:i}=e.render;let n;i.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of i)if(e.width>=t&&e.height>=s){if(e.theme===r)return e.url;n=e}if(n)return n.url}return o(e,c(t,s,r))}const l=(e,t=i.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+r.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",u=(e,t,s,n=i.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,s=i.Theme.DEFAULT)=>a(r.STICKER_PACK_ICON,e,t,s))(t,s,n)),h=e=>e.recipient_id===r.SAMPLE_RECIPIENT_ID,_=e=>{(0,n.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},968351:(e,t,s)=>{s.d(t,{InitOptionsProvider:()=>n,useInitOptions:()=>a});var i=s(296540);const r=(0,i.createContext)({}),n=r.Provider;function a(){const{payload:e,...t}=(0,i.useContext)(r);return{...e,...t}}},636843:(e,t,s)=>{s.d(t,{stickers:()=>i});const i=(0,s(32489).createDomain)()},590162:(e,t,s)=>{s.d(t,{$isBuying:()=>c,buyFx:()=>a});var i=s(146322),r=s(636843),n=s(459350);const a=r.stickers.createEffect((async e=>{const t=window.Stickers.Cart.create([n.RANDOM_PRODUCT_ID]);await t.load();let s=null;try{s=await t.order({v:i.API_VERSION,ignoreEmptyError:!0,emptyErrorLoader:!1,randomStickerPackAttemptId:e.attemptId,ref:e.ref,gift_ref:e.ref})}catch{}return s&&s.random_selector_result&&!s.error?s:null})),c=r.stickers.createStore(!1).on(a,(()=>!0)).on(a.finally,(()=>!1))},553560:(e,t,s)=>{s.d(t,{hideSnackbar:()=>n,showSnackbar:()=>r});var i=s(32489);const r=(0,i.createEvent)(),n=(0,i.createEvent)()},459350:(e,t,s)=>{s.d(t,{RANDOM_PRODUCT_ID:()=>i,StickersGroup:()=>n,StickersReferrer:()=>a,UGC_STICKERS_APP_ID:()=>r});const i=10101,r=51538586;var n=function(e){return e.LAYER="layer",e}({}),a=function(e){return e.TYPE_STICKERS_KEYBOARD="stickers_keyboard2",e}({})},737305:(e,t,s)=>{s.d(t,{popupAddConflictBlocksNative:()=>n});var i=s(612517),r=s(224194);const n=e=>{(0,r.isPopUpStickersEnabled)()&&(0,i.addConflictBlocksNative)(e)}},141324:(e,t,s)=>{s.d(t,{openProductModal:()=>i});const i=s(636843).stickers.createEvent()},865014:(e,t,s)=>{s.d(t,{openRandomSelectorPacksModal:()=>i});const i=s(636843).stickers.createEvent()},522267:(e,t,s)=>{s.d(t,{openRandomSelectorResultModal:()=>i});const i=s(636843).stickers.createEvent()},363469:(e,t,s)=>{try{var i=s(636576),r=s(106801);window.vk?.stDomain&&(s.p=window.vk.stDomain+"/dist/"),(0,r.init)(),(n=window.requestIdleCallback)||(n=e=>setTimeout((()=>e()),1)),n((()=>{try{(0,i.statlogsValueEvent)("entries_requests",1,"stickers","web")}catch{}}),{timeout:5e3}),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/stickers.62099a91.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/stickers.62099a91.js",e),e}var n},944041:(e,t,s)=>{s.d(t,{getCache:()=>o,getPackByStickerId:()=>_,getSticker:()=>l,getStickers:()=>u,updateCache:()=>d});var i=s(761520),r=s(353679),n=s(612831),a=s(469004),c=s(177838);const o=()=>{if(!window.stickersCache){const e=a.ls.get("stickers_cache");s._dG("stickersCache",{...r.DEFAULT_CACHE,...e})}return window.stickersCache},d=e=>{s._dG("stickersCache",{...o(),...e})},l=e=>o().stickers.get(e),u=e=>{const{stickers:t}=o();return e.map((e=>t.get(e)))},h=e=>{const t=l(e);if(!t||!t.pack_id)return null;const s=(0,c.getProductFromCache)(o,t.pack_id);return s&&(0,n.isBasePack)(s)?s:null},_=e=>{const t=h(e);return t?Promise.resolve(t):new Promise((t=>{i.ajax.post("stickers.php",{act:"get_products",sticker_ids:[e]},{onDone(i){Promise.resolve().then(s.bind(s,440487)).then((({cacheProductsData:e})=>{e(i)})),t(h(e))},onFail:e=>(console.error(e),t(null),!0)})}))}},416577:(e,t,s)=>{s.d(t,{Cart:()=>l});var i=s(761520),r=s(433409),n=s(353679),a=s(440487),c=s(177838),o=s(944041),d=s(246429);class l{static create(e,t=[]){const s=e.map((e=>({product_id:e,amount:1})));return new l(s,t)}copy(){const e=new l(this.getItems(),this.getRecipientIds());return e.setOrder(this.getOrder()),e}getItems(){return Array.from(this.items.values())}setItems(e){this.items=new Map(e.map((e=>[e.product_id,e])))}loadItems(){const e=Array.from(this.items.keys());return(0,a.getProducts)(e).then((()=>{for(const e of Array.from(this.items.values()))e.product=(0,c.getProductFromCache)(o.getCache,e.product_id)}))}getProducts(){return(0,a.getProductsFromCache)(Array.from(this.items.keys()))}hasProduct(e){return this.items.has(e)}addProduct(e,t=!1){if(!this.hasProduct(e)){const s={product_id:e,amount:1};t?this.setItems([...this.getItems(),s]):this.setItems([s,...this.getItems()]),this.onChange&&this.onChange()}}removeProduct(e){this.hasProduct(e)&&(this.items.delete(e),this.onChange&&this.onChange())}getRecipientIds(e=!1){return this.recipientIds.size?Array.from(this.recipientIds.values()):this.isGift&&e?[n.SAMPLE_RECIPIENT_ID]:[]}setRecipientIds(e){this.recipientIds=new Set(e)}hasRecipientId(e){return this.recipientIds.has(e)}addRecipientId(e){this.hasRecipientId(e)||(this.recipientIds.add(e),this.onChange&&this.onChange())}removeRecipientId(e){this.hasRecipientId(e)&&(this.recipientIds.delete(e),this.onChange&&this.onChange())}setOrder(e){if(this._order=e,e){this.recipientIds.clear();for(const t of e.items)t.recipient_id!==n.SAMPLE_RECIPIENT_ID&&this.recipientIds.add(t.recipient_id)}}loadOrder(e){const t=e.items.map((e=>e.product_id));return(0,a.getProducts)(t).then((t=>({...e,items:e.items.map(((e,s)=>({...e,product:t[s]})))})),(()=>e))}getOrder(){return this._order}getRecipientsMap(){return this.recipients}getRecipients(){return Array.from(this.recipients.values())}getRecipientById(e){return this.recipients.get(e)}addRecipients(e){this.recipients=new Map([...this.getRecipients(),...e].map((e=>[e[0],e])))}getJSON(){return JSON.stringify({items:this.getItems().map((e=>({...e,product:void 0}))),recipient_ids:this.getRecipientIds(!0)})}isLoaded(){return null!==this.getOrder()}cancelLoad(){this.loadTimeout&&(window.clearTimeout(this.loadTimeout),this.loadTimeout=null),this.loadCancellationToken&&(this.loadCancellationToken.cancel(),this.loadCancellationToken=null)}load(e=!1){return this.cancelLoad(),new Promise((t=>{this.loadTimeout=window.setTimeout((()=>{this.loadCancellationToken=new r.AjaxCancellationToken,i.ajax.post("stickers.php",{act:"preview_products_order",cart:this.getJSON(),with_suggested_recipients:e?1:0},{cancellationToken:this.loadCancellationToken,onDone:e=>{(0,a.cacheProductsData)(e),Promise.all([this.loadItems(),this.loadOrder(e.order)]).then((([,s])=>{this.setOrder(s),e.recipients&&this.addRecipients(e.recipients),t(this)}),(()=>{}))},onFail:e=>(e&&window.__dev&&console.error(e),t(this),!0)})}),300)}))}order({ignoreEmptyError:e,emptyErrorLoader:t,...s}={}){return new Promise((r=>{i.ajax.post("stickers.php",{act:"order_products",cart:this.getJSON(),hash:s.hash||this.getOrder()?.hash,message:s.message,is_private:s.is_private?1:0,ref:s.ref,gift_ref:s.gift_ref,v:s.v,random_sticker_pack_attempt_id:s.randomStickerPackAttemptId},{onDone:e=>{requestAnimationFrame((()=>{(0,d.hideBoxLoader)()})),(0,a.cacheProductsData)(e),e.result.random_selector_result=e.random_selector_result,Promise.all([this.loadOrder(e.order),this.loadOrder(e.result)]).then((([e,t])=>{this.setOrder(e),r(t)}),(()=>{}))},onFail:s=>!s&&e?(t&&requestAnimationFrame((()=>{(0,d.showBoxLoader)()})),!0):(s&&console.error(s),r(null),!0)})}))}constructor(e,t=[]){this.loadTimeout=null,this.loadCancellationToken=null,this.isGift=!1,this.onChange=null,this._order=null,this.setItems(e),this.recipientIds=new Set(t),this.recipients=new Map}}},25221:(e,t,s)=>{s.d(t,{StickerProductsGift:()=>j});var i=s(474848),r=s(296540),n=s(694244),a=s(782174),c=s(63614),o=s(303800),d=s(700272),l=s(945206),u=s(944048),h=s(908242),_=s(817590),p=s(246429),f=s(102088),b=s(866467),g=s(612831),w=s(847771),k=s(212125),m=s(890221),y=s(150445),v=s(764557),S=s(351118);const j=({cart:e,options:{ref:t,gift_ref:s},closeBox:j,updateBox:P})=>{const[L,E]=(0,k.useCart)(e),C=!L.isLoaded()&&E;(0,r.useEffect)((()=>{P()}),[C]);const I=L.getRecipientIds(),A=L.getOrder(),T=A&&!A.error&&A.items.find((e=>!e.error&&!(0,w.isSampleOrderItem)(e))),[O,R]=function(e){if(!e)return[null,null];let t;for(const s of e.items){const{product:e}=s;if(e&&(0,g.isPackProduct)(e)){t=e;break}}let s=e.items.filter((({product:e})=>e?.can_gift));const i=s.filter((e=>!e.error&&!(0,w.isSampleOrderItem)(e)));i.length&&(s=i);const r=new g.ProductsByType(s.map((e=>e.product))),n=r.pack.values().next().value,a=Array.from(r.style);let c="",o="";if(1===a.length)c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_1_style"),"title",a[0].title),n?o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_with_pack"),"title",n.title):t&&(o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_for_pack"),"title",t.title));else if(n){if(c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_pack"),"title",n.title),a.length)switch(a.length){case 2:o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_with_2_styles"),"title1",a[0].title,"title2",a[1].title);break;case 3:o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_with_3_styles"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);break;case 4:o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_with_3_styles_and_1_more"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);break;default:const e=a.length-3;o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_with_3_styles_and_n_more",e),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title,"n",e)}}else if(a.length){switch(a.length){case 2:c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_2_styles"),"title1",a[0].title,"title2",a[1].title);break;case 3:c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_3_styles"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);break;case 4:c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_3_styles_and_1_more"),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title);break;default:const e=a.length-3;c=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_title_3_styles_and_n_more",e),"title1",a[0].title,"title2",a[1].title,"title3",a[2].title,"n",e)}t&&(o=(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_description_for_pack"),"title",t.title))}a.length?o+=" "+(0,b.getLang)("purchases_stickers_gift_description_styles"):o+=" "+(0,b.getLang)("purchases_stickers_gift_description");return[c,o]}(A),[,M]=(0,r.useState)(null);(0,r.useLayoutEffect)((()=>{const e=L.getRecipients();if(M(window.WideDropdown.init("StickerProductsGiftRecipientsDropdown",{defaultItems:e,items:e,noResult:(0,b.getLang)("gifts_nobody_found"),introText:(0,b.getLang)("gifts_start_typing_recipient"),maxItems:20,onChange:(e,t)=>{1===e?L.addRecipientId(+t):L.removeRecipientId(+t)}})),I.length)for(const e of I){const t=L.getRecipientById(e);t&&window.WideDropdown.select("StickerProductsGiftRecipientsDropdown",!1,t)}else window.WideDropdown.focus("StickerProductsGiftRecipientsDropdown");return()=>{window.WideDropdown.deinit("StickerProductsGiftRecipientsDropdown")}}),[C]);const[x,D]=(0,r.useState)(""),[G,N]=(0,r.useState)(!1),[q,B]=(0,r.useState)(!1),U=()=>{q||(B(!0),L.order({message:x,is_private:G,ref:t,gift_ref:s}).then((e=>{B(!1),e&&!e.error&&((0,p.showDoneBox)(function(e,t){const s=new g.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),i=function(e){const t=e.getPack(),s=e.getStyles();if(t)return s.length?(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_pack_and_styles",s.length),"title",t.title,"styles_num",s.length):(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_pack"),"title",t.title);if(s.length)switch(s.length){case 1:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_1_style"),"title",s[0].title);case 2:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_2_styles"),"title1",s[0].title,"title2",s[1].title);case 3:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_3_styles"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);case 4:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_3_styles_and_1_more"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);default:{const e=s.length-3;return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_products_3_styles_and_n_more",e),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title,"n",e)}}return null}(s);if(!i)return null;const r=new Set;for(const s of e.items){const{error:e,recipient_id:i}=s;if(e)continue;const n=t(i);n&&r.add(n)}const n=function(e,t){const s=Array.from(e.values());switch(s.length){case 0:return null;case 1:{const e=1===t?(0,b.getLang)("purchases_stickers_gift_result_1_recipient_single","raw"):(0,b.getLang)("purchases_stickers_gift_result_1_recipient_multiple","raw");return(0,f.langStr)((0,b.langSex)(s[0][8],e),"name",s[0][8])}case 2:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_2_recipients",t),"name1",s[0][8],"name2",s[1][8]);case 3:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_3_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8]);case 4:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_4_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8]);case 5:return(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_result_5_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8],"name5",s[4][8]);default:{const e=s.length-4,i=1===t?(0,b.getLang)("purchases_stickers_gift_result_4_recipients_and_n_more_single"):(0,b.getLang)("purchases_stickers_gift_result_4_recipients_and_n_more_multiple");return(0,f.langStr)(i,"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8],"n",e)}}return null}(r,s.getCount());if(!n)return null;return(0,f.langStr)(n,"products",i)}(e,(e=>L.getRecipientById(e)))),j())}),(()=>{})))};return(0,r.useEffect)((()=>{window.WideDropdown.disable("StickerProductsGiftRecipientsDropdown",q)}),[q]),(0,i.jsxs)(n.ModalBox,{"data-testid":"sticker-gift-modal",children:[(0,i.jsx)(a.ModalHeader,{onClose:j,closeAriaLabel:(0,b.getLang)("global_close"),children:(0,b.getLang)("purchases_stickers_gift_box_title")}),(0,i.jsx)(c.ModalBody,{insetLevel:2,children:C?(0,i.jsx)(o.Div,{children:(0,i.jsx)(d.Spinner,{stretched:!0})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.default,{order:A,forceValid:!T}),(0,i.jsx)("h1",{className:"StickerProductsGift__productsTitle",children:(0,S.decodeHTMLEntities)(O||"")}),(0,i.jsx)("p",{className:"StickerProductsGift__productsDescription",children:(0,S.decodeHTMLEntities)(R||"")}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("dl",{className:"StickerProductsGift__price",children:[(0,i.jsx)("dt",{className:"StickerProductsGift__priceLabel",children:(0,b.getLang)("purchases_gift_price_label")})," ",(0,i.jsx)("dd",{className:"StickerProductsGift__priceValue",children:(0,b.getLang)("global_n_votes",A.price.current)})]}),(0,i.jsx)("div",{className:"StickerProductsGift__balance",children:(0,f.langStr)((0,b.getLang)("gifts_you_have_X_votes"),"votes",(0,b.getLang)("global_n_votes",A.balance))})]}),(0,i.jsxs)("div",{className:"StickerProductsGift__recipients",children:[(0,i.jsx)("label",{className:"StickerProductsGift__recipientsLabel",htmlFor:"StickerProductsGiftRecipientsInput",children:(0,b.getLang)("gifts_receiver")}),(0,i.jsxs)("div",{className:"wdd StickerProductsGift__recipientsDropdown",id:"StickerProductsGiftRecipientsDropdown",children:[(0,i.jsx)("div",{className:"fl_r wdd_arr"}),(0,i.jsx)("input",{className:"wdd_text fl_l",id:"StickerProductsGiftRecipientsInput",placeholder:(0,b.getLang)("gifts_choose_recipients")})]})]}),(0,i.jsxs)("div",{className:"StickerProductsGift__message",children:[(0,i.jsx)("label",{className:"StickerProductsGift__messageLabel",htmlFor:"StickerProductsGiftMessageInput",children:(0,b.getLang)("purchases_gift_your_message")}),(0,i.jsx)(l.Textarea,{id:"StickerProductsGiftMessageInput",rows:3,value:x,onChange:e=>D(e.currentTarget.value),onResize:()=>P(),disabled:q})]}),(0,i.jsx)(u.Checkbox,{noPadding:!0,stretched:!1,checked:G,disabled:q,onChange:()=>N(!G),children:(0,b.getLang)("gifts_receiver_only")})]})}),(0,i.jsx)(h.ModalFooter,{before:(0,i.jsx)("div",{className:"StickerProductsGift__footerNote",children:!E&&A&&(0,i.jsxs)("div",{className:"StickerProductsGift__details",children:[(0,b.getLang)("purchases_stickers_gift_details_label"),(0,i.jsx)(_.HintIcon,{gap:"l",tooltip:{placement:"top",...(0,y.stickerProductsGiftDetails)({order:A,recipients:L.getRecipientsMap()})}})]})}),actions:(0,i.jsx)(v.default,{className:"StickerProductsGift__gift",mode:T?"primary":"secondary",size:"m",loading:E||q,disabled:!T,price:A?.price,text:T?(0,f.langStr)((0,b.getLang)("purchases_stickers_gift_send_for"),"price",(0,b.getLang)("global_n_votes",A?.price.current)):(0,b.getLang)("purchases_stickers_gift_send"),onClick:()=>U()})})]})}},150445:(e,t,s)=>{s.d(t,{stickerProductsGiftDetails:()=>u});var i=s(474848),r=s(296540),n=s(351118),a=s(373080),c=s(102088),o=s(866467),d=s(847771),l=s(612831);const u=({order:e,recipients:t})=>{const s=function(e){if(!e)return null;let t=e.items.filter((({product:e})=>e?.can_gift));const s=t.filter((e=>!e.error&&!(0,d.isSampleOrderItem)(e)));s.length&&(t=s);const i=[],r=[];for(const e of t){const{product:t}=e;t&&((0,l.isPackProduct)(t)?i.push(e):(0,l.isStyleProduct)(t)&&r.push(e))}const n=r.reduce(((e,t)=>e+(t.price?.current||0)),0);if(i.length){const e=i.reduce(((e,t)=>e+(t.price?.current||0)),0);return r.length?(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_summary_pack_with_styles",r.length),"pack_price_sum",(0,o.getLang)("global_n_votes",e),"styles_num",r.length,"styles_price_sum",(0,o.getLang)("global_n_votes",n)):(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_summary_pack"),"pack_price_sum",(0,o.getLang)("global_n_votes",e))}if(r.length)return(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_summary_styles",r.length),"styles_num",r.length,"styles_price_sum",(0,o.getLang)("global_n_votes",n));return null}(e)||"",u=new Map;for(const s of e.items){const{error:e,product:i,recipient_id:r}=s;if(e)continue;const n=t.get(r);if(!n)continue;let a=u.get(n);a||(a=new l.ProductsByType,u.set(n,a)),a.add(i)}const _=Array.from(u.entries()),p=_.length,f={maxWidth:291,text:_.map((([e,t])=>(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(a.InnerHTML,{Component:"span",children:e[1]}),": ",(0,n.decodeHTMLEntities)(h(t)||"")," "]},e[0])))};return f[s&&p?"header":"text"]=(0,i.jsx)(a.InnerHTML,{children:s}),f};function h(e){const t=e.getPack(),s=e.getStyles();let i="";return s.length&&(i=s.map((e=>(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_recipient_style_title"),"title",e.title))).join(", ")),t?i?(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_recipient_pack_and_styles"),"pack_title",t.title,"style_titles",i):(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_recipient_pack"),"title",t.title):i?(0,c.langStr)((0,o.getLang)("purchases_stickers_gift_details_recipient_styles"),"style_titles",i):null}},890221:(e,t,s)=>{s.d(t,{default:()=>d});var i=s(474848),r=s(351118),n=s(612831),a=s(847771);const c={s:56,m:96,l:168},o="sticker-products-gifts-icon",d=({order:e,forceValid:t=!1})=>{const s=new Map,d=new Map;if(e)for(const t of e.items){const{product:e}=t;e&&((0,n.isPackProduct)(e)?s.has(e)?s.get(e)?.push(t):s.set(e,[t]):(0,n.isStyleProduct)(e)&&(d.has(e)?d.get(e)?.push(t):d.set(e,[t])))}const l=s.keys().next().value,u=(l?1:0)+d.size,h=u>1?u>2?"s":"m":"l",_=c[h],p=Array.from(d.entries());t||p.sort((([,e],[,t])=>t.filter((e=>!e.error)).length-e.filter((e=>!e.error)).length));const f=p.slice(0,3);let b=p.slice(3),g=!0;if(!t){const e=b.filter((([,e])=>e.find((e=>!e.error))));e.length?b=e:g=!1}return(0,i.jsxs)("ul",{className:"StickerProductsGiftIcons",children:[l&&(0,i.jsx)("li",{"data-testid":o,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${h}`,"StickerProductsGiftIcons__icon--pack",{"StickerProductsGiftIcons__icon--invalid":!t&&!s.get(l)?.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,a.getStickerPackIconUrl)(l,_,_)})`}},l.id),f.map((([e,s])=>(0,i.jsx)("li",{"data-testid":o,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${h}`,"StickerProductsGiftIcons__icon--style",{"StickerProductsGiftIcons__icon--invalid":!t&&!s.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,a.getStickerPackIconUrl)(e,_,_)})`}},e.id))),b.length?(0,i.jsxs)("li",{"data-testid":o,className:(0,r.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${h}`,"StickerProductsGiftIcons__icon--more",{"StickerProductsGiftIcons__icon--invalid":!g}),children:["+",b.length]},"more"):null]})}},764557:(e,t,s)=>{s.d(t,{default:()=>o});var i=s(474848),r=s(296540),n=s(454154),a=s(351118),c=s(866467);const o=({className:e,price:t,text:s,placeholder:o,...d})=>{let l=(0,r.useMemo)((()=>{if(t){let e;t.current!==t.regular&&t.regular&&(e=(0,i.jsx)("span",{className:"StickersPriceButton__regular",children:t.current?t.regular:(0,c.langStr)((0,c.getLang)("purchases_stickers_n_for_m"),"%n","","%m",(0,c.getLang)("global_n_votes",t.regular))},"regular"));const r=(0,i.jsx)("span",{className:"StickersPriceButton__current",children:t.current?(0,c.getLang)("global_n_votes",t.current):(0,c.getLang)("purchases_for_free_btn").toLowerCase()},"current");return s?s.split(/(\{regular_price\}|\{price\})/).map(((t,s)=>"{regular_price}"===t?e:"{price}"===t?r:t?(0,i.jsx)("span",{className:"StickersPriceButton__label",children:t},`label${s}`):void 0)):[e,r]}return[o]}),[s,o,t?.regular,t?.current]);return(0,i.jsx)(n.Button,{className:(0,a.classNames)("StickersPriceButton",e),...d,children:l})}},614098:(e,t,s)=>{s.d(t,{REGULAR_SIZES:()=>n,SIZE_512:()=>r,STICKER_ICON_CLASS:()=>c,STICKER_ROW_CLASS:()=>a,StickerSize:()=>i});var i=function(e){return e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG",e}({});const r=512,n=[64,128,256,352,r],a="stickerRow",c="stickerIcon"},212125:(e,t,s)=>{s.d(t,{useCart:()=>r});var i=s(296540);const r=e=>{const[t,s]=(0,i.useState)(e),[r,n]=(0,i.useState)(null),a=(0,i.useCallback)((()=>{const e=t.load();n(e),e.then((t=>{s(t),n((t=>t===e?null:t))}),(()=>{}))}),[t]);return(0,i.useEffect)((()=>(t.onChange=a,t.isLoaded()||a(),()=>{t.onChange=null,t.cancelLoad()})),[t]),[t,null!==r]}},106801:(e,t,s)=>{s.d(t,{init:()=>_});var i=s(761894),r=s(857656),n=s(791233),a=s(708042),c=s(737305),o=s(416577),d=s(177838),l=s(67631),u=s(1497),h=s(848118);s(517101);function _(){(0,c.popupAddConflictBlocksNative)({action:i.ConflictActionsTypes.ChangeModificator,blockSelector:"#FCWindow",popUpPositions:[i.PopUpPositionTypes.FullScreen,i.PopUpPositionTypes.TopFullScreen]}),s._dG("StickersAnimation",n.StickersAnimation),s._dG("StickersSettings",a.StickersSettings),s._dG("Stickers",{...r.Stickers,Cart:o.Cart,getPurchaseResult:d.getPurchaseResult,giftStickerProducts:l.giftStickerProducts,openStickersLayerView:u.openStickersLayerView,openStickersRandomSelectorView:h.openStickersRandomSelectorView})}},440487:(e,t,s)=>{s.r(t),s.d(t,{activateProduct:()=>_,cacheProductsData:()=>a,fetchProducts:()=>h,getProduct:()=>u,getProducts:()=>l,getProductsFromCache:()=>c,loadProducts:()=>d,updateUserProductState:()=>p});var i=s(761520),r=s(177838),n=s(944041);const a=(e,t=[])=>{const s=(0,n.getCache)();if(e.stickers){const{stickers:t}=s;for(const s of e.stickers)t.has(s.id)?t.set(s.id,{...t.get(s.id),...s}):t.set(s.id,s)}if(e.products)for(const t of e.products)s.products.set(t.id,t),s.productPromises.delete(t.id);for(const e of t)s.products.has(e)||s.products.set(e,null),s.productPromises.delete(e);e.emoji&&window.Emoji&&window.Emoji.updateTabs(e.emoji.stickers,e.emoji.keywords,!0),(0,n.updateCache)(s)},c=e=>{const t=(0,n.getCache)().products;return e.map((e=>t.get(e)))};function o(){let{productsPromise:e}=(0,n.getCache)();return e||(e=new Promise((e=>setTimeout((()=>{const t=(0,n.getCache)().productIdsQueue,s=Array.from(t);t.clear(),(0,n.updateCache)({productIdsQueue:t,productsPromise:void 0}),i.ajax.post("stickers.php",{act:"get_products",product_ids:s},{onDone(t){a(t,s),e([])},onFail:t=>(console.error(t),a({},s),e([]),!0)})}),300))),(0,n.updateCache)({productsPromise:e})),e}const d=e=>{if(!e.length)return Promise.resolve([]);const{productPromises:t,productIdsQueue:s}=(0,n.getCache)(),i=new Set;for(const r of e)if(t.has(r)){const e=t.get(r);e&&i.add(e)}else{s.add(r);const e=o();t.set(r,e),i.add(e)}return(0,n.updateCache)({productIdsQueue:s,productPromises:t}),Promise.all(i).then((()=>c(e)))},l=(e,t=!0)=>{const s=t?e.filter((e=>void 0===(0,r.getProductFromCache)(n.getCache,e))):e;return s.length?d(s).then((()=>c(e))):Promise.resolve(c(e))},u=(e,t=!0)=>{if(t){const t=(0,r.getProductFromCache)(n.getCache,e);if(void 0!==t)return Promise.resolve(t)}return d([e]).then((()=>(0,r.getProductFromCache)(n.getCache,e)))},h=e=>(function(e){const{products:t}=(0,n.getCache)();for(const s of e){const e=t.get(s.id);(null===e||e&&e.hash!==s.hash)&&t.delete(s.id)}(0,n.updateCache)({products:t})}(e),l(e.map((e=>e.id)))),_=e=>new Promise((t=>{i.ajax.post("stickers.php",{act:"activate_product",product_id:e.id,hash:e.csrf_hash},{onDone(e){a(e),t()},onFail:e=>(console.error(e),t(),!0)})})),p=(e,t,s,r=!0)=>new Promise((n=>{i.ajax.post("stickers.php",{act:"update_user_product_state",product_ids:[e],key:t,value:s},{onDone(e){r&&a(e),n()},onFail:e=>(console.error(e),n(),!0)})}))},67631:(e,t,s)=>{s.d(t,{giftStickerProducts:()=>p,giftStickersCart:()=>_});var i=s(474848),r=s(440961),n=s(865708),a=s(270959),c=s(205338),o=s(540462),d=s(416577),l=s(177838),u=s(944041),h=s(25221);function _(e,t){const{productsGiftLock:s}=(0,u.getCache)();if(s)return null;let d,_;(0,u.updateCache)({productsGiftLock:!0});const p={...t};function f(){return d?.bodyNode.querySelector(".StickersProductsGift")}function b(){d?.hide()}function g(){d?.updateBoxCoords()}return(0,l.showLoader)(),e.isGift=!0,Promise.all([e.load(!0),window.stManager.add(["stickers.css",window.jsc("web/wide_dd.js"),"wide_dd.css"])]).then((([e])=>{(0,l.hideLoader)(),d=new a.MessageBox({hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:450,onShow(){!function(e){const t=f();t&&((0,o.partConfigEnabled)("enable_create_root")?(_||(_=(0,c.createRoot)(t)),_.render((0,i.jsx)(n.AppRootProvider,{children:(0,i.jsx)(h.StickerProductsGift,{cart:e,options:p,closeBox:b,updateBox:g})}))):r.render((0,i.jsx)(n.AppRootProvider,{children:(0,i.jsx)(h.StickerProductsGift,{cart:e,options:p,closeBox:b,updateBox:g})}),t))}(e),requestAnimationFrame((()=>{g()}))},onHideAttempt:()=>(function(){const e=f();(0,o.partConfigEnabled)("enable_create_root")?_?.unmount():e&&r.unmountComponentAtNode(e)}(),!0),onHide(){(0,u.updateCache)({productsGiftLock:!1})}}),d.content('<div class="StickersProductsGift"></div>'),d.show()}),(()=>{})),{hide:b}}function p(e,t=[],s){return _(d.Cart.create(e,t),s)}},177838:(e,t,s)=>{s.d(t,{findClosestStickerSize:()=>w,getBoxLayerWrap:()=>h,getLangCode:()=>g,getProductFromCache:()=>k,getPurchaseResult:()=>f,hideLoader:()=>p,showLoader:()=>_,updateStickersFromQueue:()=>b});var i=s(102088),r=s(866467),n=s(19589),a=s(754866),c=s(246429),o=s(612831),d=s(614098),l=s(847771);function u(){return document.querySelector("#box_loader")}function h(){return document.querySelector("#box_layer_wrap")}function _(){const e=u();(0,c.refreshBoxLoaderCoords)(),(0,a.show)(e),(0,a.show)(h())}function p(){(0,a.hide)(u())}function f(e){const t=new o.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),s=t.getPack(),n=t.getStyles();if(s)return n.length?(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_pack_and_styles",n.length),"pack_title",s.title,"n",n.length):(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_pack"),"title",s.title);if(n.length)switch(n.length){case 1:return(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_1_style"),"title",n[0].title);case 2:return(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_2_styles"),"title1",n[0].title,"title2",n[1].title);case 3:return(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);case 4:return(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title);default:const e=n.length-3;return(0,i.langStr)((0,r.getLang)("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",n[0].title,"title2",n[1].title,"title3",n[2].title,"n",e)}return null}function b(e){!function(e){const t=n.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light";e.querySelectorAll(`.sticker_img[${t}]`).forEach((e=>{const s=e.getAttribute(t);s&&(e.src=s)}))}(e)}const g=()=>window.vk.lang||"ru",w=e=>e>d.SIZE_512?((0,l.logStickersError)("Нет размера стикера больше 512px"),d.SIZE_512):d.REGULAR_SIZES.find((t=>t>=e)),k=(e,t)=>e().products.get(t)},444091:(e,t,s)=>{s.d(t,{ViewId:()=>r,views:()=>l});var i=s(296540),r=(s(517101),function(e){return e.LAYER="layer",e.LAYER_PURCHASE_DETAILS="layer_purchase_details",e.RANDOM_SELECTOR="random_selector",e.RANDOM_SELECTOR_PACKS="RANDOM_SELECTOR_packs",e.RANDOM_SELECTOR_RESULT="RANDOM_SELECTOR_result",e}({}));const n=(0,i.lazy)((()=>Promise.all([s.e(91498),s.e(89631),s.e(762),s.e(21529),s.e(32466),s.e(6864),s.e(79144),s.e(21358),s.e(33651),s.e(81652),s.e(52731),s.e("langs/web/stickers-layer-view")]).then(s.bind(s,568327)).then((({Layer:e})=>({default:e}))))),a=(0,i.lazy)((()=>Promise.all([s.e(91498),s.e(89631),s.e(16846),s.e("langs/web/stickers-layer-purchase-details-view")]).then(s.bind(s,491893)).then((({PurchaseDetails:e})=>({default:e}))))),c=(0,i.lazy)((()=>Promise.all([s.e(91498),s.e(89631),s.e(762),s.e(81652),s.e(64273),s.e("langs/web/stickers-random-selector-view")]).then(s.bind(s,786622)).then((({Main:e})=>({default:e}))))),o=(0,i.lazy)((()=>Promise.all([s.e(91498),s.e(89631),s.e(762),s.e(12318),s.e("langs/web/stickers-random-selector-packs-view")]).then(s.bind(s,935102)).then((({Packs:e})=>({default:e}))))),d=(0,i.lazy)((()=>Promise.all([s.e(91498),s.e(89631),s.e(762),s.e(71409),s.e("langs/web/stickers-random-selector-result-view")]).then(s.bind(s,10466)).then((({Result:e})=>({default:e}))))),l=new Map([["layer",{Component:n,width:640}],["layer_purchase_details",{Component:a}],["random_selector",{Component:c}],["RANDOM_SELECTOR_packs",{Component:o}],["RANDOM_SELECTOR_result",{Component:d}]])},517101:(e,t,s)=>{s(239866)},239866:(e,t,s)=>{var i=s(32489),r=s(432465),n=s(553560);const a=(0,i.createEffect)((({title:e,subtitle:t,action:s,timeout:i,onClose:n})=>{(0,r.showSnackbar)({text:e,subtitle:t,timeout:i,action:s,onClose:n})}));(0,i.sample)({clock:n.showSnackbar,target:a});const c=(0,i.createEffect)((e=>{(0,r.hideSnackbar)(e)}));(0,i.sample)({clock:n.hideSnackbar,target:c})},574061:(e,t,s)=>{s.d(t,{openView:()=>c});var i=s(474848),r=s(444091),n=s(968351),a=s(211413);async function c(e){const{view:t,modalBoxOptions:s}=e,{width:c,Component:o}=r.views.get(t)||{};if(o)return(0,a.showMessageBoxModalSuspense)((({onClose:t,refreshCoordinates:s})=>(0,i.jsx)(n.InitOptionsProvider,{value:{payload:{},...e,init:s,destroy:t},children:(0,i.jsx)(o,{})})),{width:c,...s})}},878769:(e,t,s)=>{s.d(t,{openLayerPurchaseDetails:()=>n});var i=s(444091),r=s(574061);function n(e){return(0,r.openView)({payload:e,view:i.ViewId.LAYER_PURCHASE_DETAILS})}},1497:(e,t,s)=>{s.d(t,{openStickersLayerView:()=>d});var i=s(32489),r=s(444091),n=s(574061),a=s(878769),c=s(636843),o=s(141324);async function d(e){const{modalBoxOptions:t}=e;return(0,n.openView)({payload:{...e,onPurchaseDetailsOpen:e=>(0,a.openLayerPurchaseDetails)({details:e})},modalBoxOptions:t,view:r.ViewId.LAYER})}const l=c.stickers.createEffect(d);(0,i.sample)({clock:o.openProductModal,target:l})},848118:(e,t,s)=>{s.d(t,{openStickersRandomSelectorView:()=>b});var i=s(32489),r=s(574061),n=s(444091),a=s(636843),c=s(590162),o=s(865014),d=s(522267),l=s(190929),u=s(246429);const h={},_=a.stickers.createEvent(),p=a.stickers.createStore(h).reset(_),f=a.stickers.createEffect((e=>{(0,u.hideBoxLoader)(),(0,r.openView)({...e,view:n.ViewId.RANDOM_SELECTOR,modalBoxOptions:{onDestroy:()=>{e.modalBoxOptions?.onDestroy?.(),_()}},payload:{onGift:()=>{(0,l.showGiftModal)({giftId:10101,recipientIds:e.payload?.recipientIds??[],referrer:e.ref})},reference:e.ref}})})),b=a.stickers.createEvent();(0,i.sample)({clock:b,target:p}),(0,i.sample)({source:p,filter:e=>e!==h,target:f});const g=a.stickers.createEffect((()=>{(0,r.openView)({view:n.ViewId.RANDOM_SELECTOR_PACKS})}));(0,i.sample)({clock:o.openRandomSelectorPacksModal,target:g});const w=a.stickers.createEffect((()=>{(0,r.openView)({view:n.ViewId.RANDOM_SELECTOR_RESULT})}));(0,i.sample)({clock:d.openRandomSelectorResultModal,target:w}),(0,i.sample)({clock:c.buyFx.finally,source:p,filter:()=>!(0,u.curBox)(),fn:e=>({...e,payload:{...e.payload,preventReload:!0}}),target:f})},332384:(e,t,s)=>{s.d(t,{GIFT_MODAL_WIDTH:()=>i});const i=456},190929:(e,t,s)=>{s.d(t,{isNewGiftModalEnabled:()=>i.isNewGiftModalEnabled,isSendGiftUrl:()=>r.isSendGiftUrl,parseSendGiftUrl:()=>r.parseSendGiftUrl,showGiftModal:()=>i.showGiftModal});var i=s(168091),r=s(672734)},672734:(e,t,s)=>{function i(e){const t=e.match(RegExp("^send_gift(?<giftId>\\d+)(?:_(?<recipientIds>\\d+(?:\\,\\d+)*))?(?:_(?<referrer>[a-zA-Z\\d_-]+))?$","i"));if(!t)return;const s=Number(t.groups?.giftId),i=t.groups?.recipientIds?t.groups?.recipientIds.split(",").map((e=>Number(e))):[],r=t.groups?.referrer;return{giftId:s,recipientIds:i,referrer:r}}function r(e){return Boolean(i(e))}function n({giftId:e,recipientIds:t,referrer:s}){let i=`send_gift${e}`;return t&&t.length&&(i+=`_${t.join(",")}`),s&&(i+=`_${s}`),i}s.d(t,{createLegacyUrlWParam:()=>n,isSendGiftUrl:()=>r,parseSendGiftUrl:()=>i})},168091:(e,t,s)=>{s.d(t,{isNewGiftModalEnabled:()=>u,showGiftModal:()=>l});var i=s(474848),r=s(725669),n=s(540462),a=s(604743),c=s(672734),o=s(332384);const d=(0,r.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(21529),s.e(31779),s.e(89887),s.e(32466),s.e(6864),s.e(79144),s.e(55383),s.e(16184),s.e(52007),s.e("langs/web/gift-modal-legacy")]).then(s.bind(s,150447))),(({GiftModalLegacy:e})=>e));function l(e,t=!1,s=!0){const r=t?void 0:window.nav?.objLoc?.w;!t&&(0,n.partConfigEnabled)("gift_modal_route_fix_vkcom")&&s&&window.nav.setLoc({...window.nav.objLoc,w:(0,c.createLegacyUrlWParam)(e)});(0,a.showMessageBoxModalSuspense)((t=>(0,i.jsx)(d,{...e,...t,onClose:()=>{t?.onClose(),(0,n.partConfigEnabled)("gift_modal_route_fix_vkcom")&&s&&window.nav.setLoc({...window.nav.objLoc,w:r})}})),{width:o.GIFT_MODAL_WIDTH})}function u(){return(0,n.partConfigEnabled)("new_gift_modal_vkcom")}},251964:(e,t,s)=>{s.d(t,{LottieDataCache:()=>d});var i=s(434518),r=s(763812),n=(0,r._)("_OUTDATED_CACHE_LIFETIME"),a=(0,r._)("_cache"),c=(0,r._)("_outdated"),o=(0,r._)("_checkOutdated");class d{static set(e,t){(0,i._)(this,a)[a].set(e,t)}static get(e){return(0,i._)(this,c)[c].delete(e),(0,i._)(this,o)[o](),(0,i._)(this,a)[a].get(e)}static delete(e){(0,i._)(this,a)[a].delete(e)}static outdate(e){(0,i._)(this,a)[a].has(e)&&(0,i._)(this,c)[c].set(e,Date.now())}}Object.defineProperty(d,o,{value:function(){for(const[e,t]of(0,i._)(this,c)[c])Date.now()-t<=(0,i._)(this,n)[n]||((0,i._)(this,a)[a].delete(e),(0,i._)(this,c)[c].delete(e))}}),Object.defineProperty(d,n,{writable:!0,value:3e5}),Object.defineProperty(d,a,{writable:!0,value:new Map}),Object.defineProperty(d,c,{writable:!0,value:new Map})},838086:(e,t,s)=>{s.d(t,{AnimationDataLoadError:()=>i});class i extends Error{constructor(){super("Не удалось загрузить данные об анимации")}}},641771:(e,t,s)=>{s.d(t,{EmptyAnimationDataError:()=>i});class i extends Error{constructor(){super("Не переданы данные для загрузки анимации")}}},264508:(e,t,s)=>{s.d(t,{InvalidAnimationSizeError:()=>i});class i extends Error{constructor(){super("Передайте размер анимации, размеры контейнера имеют неявные значения")}}},300712:(e,t,s)=>{s.d(t,{OffscreenCanvasNotSupportedError:()=>i});class i extends Error{constructor(){super("OffscreenCanvas не поддерживается клиентом, проигрывание анимации невозможно")}}},830235:(e,t,s)=>{s.d(t,{AnimationObserver:()=>w});var i=s(434518),r=s(763812),n=s(108193),a=s(342042),c=s(184330),o=s(505471),d=(0,r._)("_observer"),l=(0,r._)("_paused"),u=(0,r._)("_visible"),h=(0,r._)("_primaryGroup"),_=(0,r._)("_groups"),p=(0,r._)("_ignoredGroups"),f=(0,r._)("_checkPlayers"),b=(0,r._)("_checkPlayer"),g=(0,r._)("_removePlayer");class w{static addPlayer(e){var t,s;const{canvas:r,options:{group:n}}=e;(t=(0,i._)(this,_)[_])[s=n]??(t[s]=new Set);(0,i._)(this,_)[_][n].add(e),(0,i._)(this,d)[d]?.observe(r)}static removePlayer(e){const{canvas:t,options:{group:s}}=e,r=(0,i._)(this,_)[_][s];r?.size&&(r.delete(e),r.size||delete(0,i._)(this,_)[_][s]),(0,i._)(this,d)[d]?.unobserve(t),(0,i._)(this,l)[l].delete(e),(0,i._)(this,u)[u].delete(e)}static setPrimaryGroup({group:e,...t}){(0,i._)(this,h)[h]=e,(0,i._)(this,f)[f](t)}static resetPrimaryGroup(){(0,i._)(this,h)[h]=void 0,(0,i._)(this,f)[f]()}static ignoreGroup(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{(0,i._)(this,p)[p].add(e)})),(0,i._)(this,f)[f]()}static removeIgnoredGroup(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{(0,i._)(this,p)[p].add(e)})),(0,i._)(this,f)[f]()}}Object.defineProperty(w,f,{value:function(e={}){const{group:t}=e,s=void 0!==t;if(s&&!(0,i._)(this,_)[_][t])return;const r=s?[t]:Object.keys((0,i._)(this,_)[_]);for(const t of r){const s=(0,i._)(this,_)[_][t];s?.forEach((t=>{(0,i._)(this,b)[b]({player:t,...e})}))}}}),Object.defineProperty(w,b,{value:async function({player:e,idle:t,pause:s,destroy:r,destroyCache:n}){const{canvas:a,options:{group:o}}=e,d=(0,i._)(this,l)[l].has(e),_=(0,i._)(this,u)[u].has(e),f=(0,i._)(this,p)[p].has(o),b=(0,i._)(this,h)[h]&&(0,i._)(this,h)[h]!==o,w=await e.paused();if(r||!f&&!a.isConnected)return void(0,i._)(this,g)[g](e);!1===t&&w&&c.isSafari&&e.redraw();if(f)return;if((s||t||b)&&!w)return e.pause().then((()=>{b&&n&&e.destroyCache()})),void(0,i._)(this,l)[l].add(e);d&&w&&_&&!b&&(e.play(),(0,i._)(this,l)[l].delete(e))}}),Object.defineProperty(w,g,{value:function(e){const{canvas:t,options:{group:s}}=e;e.destroy();const r=(0,i._)(this,_)[_][s];r?.size&&(r.delete(e),r.size||delete(0,i._)(this,_)[_][s]);(0,i._)(this,d)[d]?.unobserve(t),(0,i._)(this,u)[u].delete(e)}}),Object.defineProperty(w,d,{writable:!0,value:void 0}),Object.defineProperty(w,l,{writable:!0,value:new Set}),Object.defineProperty(w,u,{writable:!0,value:new Set}),Object.defineProperty(w,h,{writable:!0,value:void 0}),Object.defineProperty(w,_,{writable:!0,value:{}}),Object.defineProperty(w,p,{writable:!0,value:new Set}),o.isIntersectionObserverSupported&&((0,i._)(w,d)[d]=new IntersectionObserver((e=>{for(const{target:t,isIntersecting:s}of e)for(const e in(0,i._)(w,_)[_]){if(!(0,i._)(w,_)[_].hasOwnProperty(e))continue;const r=[...(0,i._)(w,_)[_][e]]?.find((e=>e.canvas===t));if(!r)continue;const a=(0,i._)(w,p)[p].has(e),{initialized:c,initializing:o,options:{lazyLoading:d}}=r;if(s){if(!d||c||o||n.AnimationObserverLazyLoad.addToQueue(r),a)continue;(0,i._)(w,u)[u].add(r),(0,i._)(w,b)[b]({player:r})}else{if(n.AnimationObserverLazyLoad.removeFromQueue(r),r.canvas.isConnected||r.destroy(),a)continue;(0,i._)(w,u)[u].delete(r),(0,i._)(w,b)[b]({player:r,pause:!0}),r.destroyCache()}break}}))),a.idleManager.addEventListener("change",(e=>{(0,i._)(w,f)[f]({idle:e})}))},108193:(e,t,s)=>{s.d(t,{AnimationObserverLazyLoad:()=>h});var i=s(434518),r=s(763812),n=s(351118),a=(0,r._)("_PROCESSING_LIMIT"),c=(0,r._)("_queue"),o=(0,r._)("_processing"),d=(0,r._)("_processQueue"),l=(0,r._)("_processQueueHandler"),u=(0,r._)("_processPlayer");class h{static addToQueue(e){(0,i._)(this,c)[c].add(e),(0,i._)(this,d)[d]()}static removeFromQueue(e){(0,i._)(this,c)[c].delete(e)}}Object.defineProperty(h,l,{value:function(){if(!(0,i._)(this,c)[c].size||(0,i._)(this,o)[o].size)return;for(;(0,i._)(this,o)[o].size<(0,i._)(this,a)[a]&&(0,i._)(this,c)[c].size;){const e=[...(0,i._)(this,c)[c]].shift();e&&((0,i._)(this,c)[c].delete(e),(0,i._)(this,u)[u](e))}}}),Object.defineProperty(h,u,{value:async function(e){(0,i._)(this,o)[o].add(e);try{await e.init()}catch(e){console.error(e)}(0,i._)(this,o)[o].delete(e),(0,i._)(this,d)[d]()}}),Object.defineProperty(h,a,{writable:!0,value:8}),Object.defineProperty(h,c,{writable:!0,value:new Set}),Object.defineProperty(h,o,{writable:!0,value:new Set}),Object.defineProperty(h,d,{writable:!0,value:(0,n.throttle)((0,i._)(h,l)[l].bind(h),20)})},173086:(e,t,s)=>{s.d(t,{EventDispatcher:()=>i});class i{hasEventListener(e,t){return this.listeners.some((s=>s.type===e&&s.listener===t))}addEventListener(e,t,s={}){return this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,options:s}),this}removeEventListener(e,t){const s=this.listeners.findIndex((s=>s.type===e&&s.listener===t));return-1!==s&&this.listeners.splice(s,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e,...t){return this.listeners.filter((t=>t.type===e)).forEach((e=>{const{type:s,listener:i,options:r}=e;i(...t),r?.once&&this.removeEventListener(s,i)})),this}constructor(){this.listeners=[]}}},342042:(e,t,s)=>{s.d(t,{idleManager:()=>p});var i=s(434518),r=s(763812),n=s(173086),a=s(488577),c=(0,r._)("_focusEventName"),o=(0,r._)("_isIdle"),d=(0,r._)("_focusPromise"),l=(0,r._)("_focusResolve"),u=(0,r._)("_setIsIdle");class h extends n.EventDispatcher{get focusPromise(){return(0,i._)(this,d)[d]}get isIdle(){return(0,i._)(this,o)[o]}constructor(){super(),Object.defineProperty(this,u,{value:_}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,i._)(this,o)[o]=!0,(0,i._)(this,d)[d]=Promise.resolve(),(0,i._)(this,l)[l]=()=>{},"undefined"!=typeof window&&(window.addEventListener("blur",(()=>{(0,i._)(this,u)[u](!0),window.addEventListener("focus",(()=>{(0,i._)(this,u)[u](!1)}),{once:!0})})),window.addEventListener((0,i._)(h,c)[c],(()=>{(0,i._)(this,u)[u](!1)}),{once:!0,passive:!0}),this.addEventListener("change",(e=>{e?(0,i._)(this,d)[d]=new Promise((e=>{(0,i._)(this,l)[l]=e})):(0,i._)(this,l)[l]()})))}}function _(e){(0,i._)(this,o)[o]!==e&&((0,i._)(this,o)[o]=e,this.dispatchEvent("change",e))}Object.defineProperty(h,c,{writable:!0,value:a.isTouchSupported?"touchstart":"mousemove"});const p=new h},812153:(e,t,s)=>{s.d(t,{useLottie:()=>a});var i=s(50790),r=s(296540),n=s(535130);function a(e,{play:t,show:s}={}){const{animationUrl:a,animationData:c}=e,o=(0,r.useRef)(!1),d=(0,r.useRef)(null),l=(0,r.useRef)(null),[u,h]=(0,r.useState)(!1),[_,p]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1),[g,w]=(0,r.useState)(!1),k=(0,i.useIsMounted)();(0,r.useEffect)((()=>{const e=l.current;e&&!f&&(void 0!==t&&(t?e.play():e.pause()),void 0!==s&&(s?e.show():e.hide()))}),[f,t,s]),(0,r.useLayoutEffect)((()=>((async()=>{const t=l.current;t?o.current=!1:(b(!0),w(!1));const s=d.current;if((a||c)&&s&&!o.current){o.current=!0,h(!1),p(null);try{const t=await n.LottieManager.loadAnimation({containers:[s],...e});t.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{w(!0)}))}),{once:!0}),t.addEventListener("destroy",(()=>{w(!1)}),{once:!0}),b(!1),l.current=t}catch(e){h(!0),p(e)}k()&&t?.destroy()}})(),()=>{l.current?.destroy()})),[a,c]);return{lottieError:u,lottieLoading:f,lottieLoaded:!f&&!u,lottieRendered:g,lottiePlayerRef:l,lottieContainerRef:d,lottieErrorMessage:_}}},535130:(e,t,s)=>{s.d(t,{LottieManager:()=>y});var i=s(434518),r=s(763812),n=s(351118),a=s(558137),c=s(542102),o=s(300712),d=s(830235),l=s(415855),u=s(351901),h=(0,r._)("_WORKERS_COUNT"),_=(0,r._)("_observer"),p=(0,r._)("_prevUsedWorkerIndex"),f=(0,r._)("_workers"),b=(0,r._)("_players"),g=(0,r._)("_initialized"),w=(0,r._)("_initializePromise"),k=(0,r._)("_getWorker");class m{static get observer(){return(0,i._)(this,_)[_]}static init(){return l.isOffscreenCanvasSupported?((0,i._)(this,w)[w]||((0,i._)(this,w)[w]=(async()=>{try{const{EsThread:e}=await(0,u.loadThreads)();(0,i._)(this,f)[f]=await Promise.all((0,n.createArray)((0,i._)(this,h)[h]).map((()=>e.Spawn(new Worker(new URL(self.location.origin+"/dist/"+s.u(75477),s.b),{type:void 0})))))}catch(e){throw e}(0,i._)(this,g)[g]=!0})()),(0,i._)(this,w)[w]):Promise.reject(new o.OffscreenCanvasNotSupportedError)}static async loadAnimation(e){(0,i._)(this,g)[g]||await this.init();const t=new c.LottiePlayer((0,i._)(this,k)[k](e),e);return t.options.lazyLoading||await t.init(),(0,i._)(this,b)[b].add(t),(0,i._)(this,_)[_].addPlayer(t),t.addEventListener("destroy",(()=>{(0,i._)(this,b)[b].delete(t),(0,i._)(this,_)[_].removePlayer(t)}),{once:!0}),t}}Object.defineProperty(m,k,{value:function(e){const t=e?.animationUrl,s=e?.animationData;for(const e of(0,i._)(this,b)[b])if(e.options.animationUrl===t||e.options.animationData===s)return e.worker;let r=(0,i._)(this,p)[p]++;r>=(0,i._)(this,f)[f].length&&(r=0,(0,i._)(this,p)[p]=0);return(0,i._)(this,f)[f][r]}}),Object.defineProperty(m,h,{writable:!0,value:4}),Object.defineProperty(m,_,{writable:!0,value:d.AnimationObserver}),Object.defineProperty(m,p,{writable:!0,value:0}),Object.defineProperty(m,f,{writable:!0,value:[]}),Object.defineProperty(m,b,{writable:!0,value:new Set}),Object.defineProperty(m,g,{writable:!0,value:!1}),Object.defineProperty(m,w,{writable:!0,value:void 0});const y=(0,a.makeSharedState)("rlottie",(()=>m),{version:3})()},42459:(e,t,s)=>{s.d(t,{LottiePlayerEventTask:()=>i});class i{constructor(e,t){this.taskUID=e,this.resolve=t}}},542102:(e,t,s)=>{s.d(t,{LottiePlayer:()=>G});var i=s(434518),r=s(763812),n=s(351118),a=s(251964),c=s(42459),o=s(173086),d=s(641771),l=s(264508),u=s(838086),h=s(157951),_=s(150195),p=s(273808),f=s(908575),b=s(351901),g=(0,r._)("_events"),w=(0,r._)("_worker"),k=(0,r._)("_options"),m=(0,r._)("_canvas"),y=(0,r._)("_destroyed"),v=(0,r._)("_initialized"),S=(0,r._)("_startInitialization"),j=(0,r._)("_initializePromise"),P=(0,r._)("_destroy"),L=(0,r._)("_render"),E=(0,r._)("_setOptions"),C=(0,r._)("_createPlayerMethodProxy"),I=(0,r._)("_loadAnimationUrl"),A=(0,r._)("_transferableOptions"),T=(0,r._)("_setName"),O=(0,r._)("_setSize"),R=(0,r._)("_setScale"),M=(0,r._)("_setCanvas"),x=(0,r._)("_attachEventTask"),D=(0,r._)("_destroyHandler");class G extends o.EventDispatcher{init(){if((0,i._)(this,v)[v]||!(0,i._)(this,S)[S])return(0,i._)(this,j)[j];const e=(async()=>{const[{Transfer:e}]=await Promise.all([(0,b.loadThreads)(),(0,i._)(this,I)[I]()]);if(!(0,i._)(this,k)[k].animationData)throw new d.EmptyAnimationDataError;const t=(0,i._)(this,A)[A],s=(0,i._)(this,m)[m].transferControlToOffscreen();await(0,i._)(this,w)[w].methods.createPlayer(e({canvas:s,options:t,id:this.id},[s]))})();return e.then((()=>{(0,i._)(this,v)[v]=!0,(0,i._)(this,k)[k].autoplay&&this.play()})),(0,i._)(this,S)[S](e),(0,i._)(this,S)[S]=void 0,(0,i._)(this,j)[j]}get worker(){return(0,i._)(this,w)[w]}get canvas(){return(0,i._)(this,m)[m]}get options(){return(0,i._)(this,k)[k]}get initialized(){return(0,i._)(this,v)[v]}get initializing(){return!(0,i._)(this,S)[S]&&!(0,i._)(this,v)[v]}show(){(0,i._)(this,m)[m].style.visibility="unset"}hide(){(0,i._)(this,m)[m].style.visibility="hidden"}setOptions(e){Object.assign((0,i._)(this,k)[k],e)}setSpeed(e=1){(0,i._)(this,k)[k].speed!==e&&((0,i._)(this,k)[k].speed=e)}setDirection(e=h.LottiePlayerDirection.FORWARD){(0,i._)(this,k)[k].direction!==e&&((0,i._)(this,k)[k].direction=e)}setCache(e=!0){(0,i._)(this,k)[k].cache=e}setStrictCache(e=!0){(0,i._)(this,k)[k].strictCache=e}setLazyLoading(e=!0){(0,i._)(this,k)[k].lazyLoading=e}setAutoplay(e=!0){(0,i._)(this,k)[k].autoplay=e}setLoop(e=!0){(0,i._)(this,k)[k].loop=e}setColor(e=null){if(Array.isArray(e)){const[t,s,i,r=1]=e;e=`rgba(${t},${s},${i},${r})`}else"currentColor"===e&&(e=getComputedStyle((0,i._)(this,m)[m]).color);(0,i._)(this,k)[k].color=e}setStartFrameIndex(e){void 0!==e&&((0,i._)(this,k)[k].startFrameIndex=e)}async render(...e){const t=await(0,i._)(this,L)[L](...e);if(!t)return;const s=new OffscreenCanvas((0,i._)(this,m)[m].width,(0,i._)(this,m)[m].height),r=s.getContext("2d");return r?(r.drawImage(t,0,0),s):void 0}destroy(){if(this.initialized)return(0,i._)(this,P)[P]();this.dispatchEvent("destroy")}constructor(e,t){super(),Object.defineProperty(this,C,{value:N}),Object.defineProperty(this,I,{value:q}),Object.defineProperty(this,A,{get:B,set:void 0}),Object.defineProperty(this,T,{value:U}),Object.defineProperty(this,O,{value:F}),Object.defineProperty(this,R,{value:z}),Object.defineProperty(this,M,{value:V}),Object.defineProperty(this,x,{value:K}),Object.defineProperty(this,D,{value:H}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),this.id=(0,n.getRandomString)(6),(0,i._)(this,m)[m]=document.createElement("canvas"),(0,i._)(this,y)[y]=!1,(0,i._)(this,v)[v]=!1,(0,i._)(this,j)[j]=new Promise((e=>{(0,i._)(this,S)[S]=e})),this.play=(0,i._)(this,C)[C]("play"),this.playPart=(0,i._)(this,C)[C]("playPart"),this.playTo=(0,i._)(this,C)[C]("playTo"),this.pause=(0,i._)(this,C)[C]("pause"),this.reset=(0,i._)(this,C)[C]("reset"),this.stop=(0,i._)(this,C)[C]("stop"),this.destroyCache=(0,i._)(this,C)[C]("destroyCache"),(0,i._)(this,P)[P]=(0,i._)(this,C)[C]("destroy"),this.paused=(0,i._)(this,C)[C]("paused"),this.state=(0,i._)(this,C)[C]("state"),this.redraw=(0,i._)(this,C)[C]("redraw"),(0,i._)(this,L)[L]=(0,i._)(this,C)[C]("render"),(0,i._)(this,E)[E]=(0,i._)(this,C)[C]("setOptions");const{name:s,loop:r,color:a,width:c,height:o,speed:d,cache:u,autoplay:h,direction:p,strictCache:f,lazyLoading:b,startFrameIndex:W,containers:[$]}=t;if(!c||!o){const{width:e,height:s}=(0,_.getElementSize)($);t.width=e,t.height=s}if(Number(t.width)<=0||Number(t.height)<=0)throw new l.InvalidAnimationSizeError;(0,i._)(this,w)[w]=e,(0,i._)(this,k)[k]={...t},(0,i._)(this,k)[k].containers.forEach((e=>{e.appendChild((0,i._)(this,m)[m])})),(0,i._)(this,T)[T](s),this.setLoop(r),this.setCache(u),this.setColor(a),this.setSpeed(d),(0,i._)(this,O)[O](t),(0,i._)(this,R)[R](t),(0,i._)(this,M)[M](t),this.setAutoplay(h),this.setDirection(p),this.setStrictCache(f),this.setLazyLoading(b),this.setStartFrameIndex(W),(0,i._)(this,k)[k]=new Proxy((0,i._)(this,k)[k],{set:(e,t,s)=>(e[t]=s,(0,i._)(this,E)[E]((0,i._)(this,A)[A]),!0)}),(0,i._)(G,g)[g].forEach((e=>{(0,i._)(this,x)[x](e)})),this.addEventListener("destroy",(0,i._)(this,D)[D].bind(this),{once:!0})}}function N(e){return async(...t)=>{if(!(0,i._)(this,y)[y])return await(0,i._)(this,j)[j],(0,i._)(this,w)[w].methods[e](this.id,...t)}}async function q(){const{animationData:e,animationUrl:t}=(0,i._)(this,k)[k];if(t&&!e){const e=a.LottieDataCache.get(t),s=e||await fetch(t).then((e=>e.blob())).catch((()=>null));if(!s)throw new u.AnimationDataLoadError;e||a.LottieDataCache.set(t,s),(0,i._)(this,k)[k].animationData=s}}function B(){const e={...(0,i._)(this,k)[k]};return delete e.containers,e}function U(e=(0,i._)(this,k)[k].animationUrl||this.id){(0,i._)(this,k)[k].name=e}function F({width:e,height:t}){e&&((0,i._)(this,k)[k].width=Math.trunc(Math.abs(e))),t&&((0,i._)(this,k)[k].height=Math.trunc(Math.abs(t)))}function z({scale:e=1,upscale:t=!0}){(0,i._)(this,k)[k].scale=e,(0,i._)(this,k)[k].upscale=t,t&&window.devicePixelRatio>1&&((0,i._)(this,k)[k].scale+=window.devicePixelRatio-1),(0,i._)(this,m)[m].width=(0,i._)(this,k)[k].width*(0,i._)(this,k)[k].scale,(0,i._)(this,m)[m].height=(0,i._)(this,k)[k].height*(0,i._)(this,k)[k].scale,(0,i._)(this,m)[m].style.width=`${(0,i._)(this,k)[k].width}px`,(0,i._)(this,m)[m].style.height=`${(0,i._)(this,k)[k].height}px`}function V({width:e,height:t,containers:s,className:r}){e&&t&&((0,i._)(this,m)[m].dataset.testid="lottie",(0,i._)(this,k)[k].containers=s,r&&r.split(" ").forEach((e=>{e&&(0,i._)(this,m)[m].classList.add(e)})))}function K(e){const t=(0,p.getPlayerEventId)({event:e,player:this});(0,i._)(this,w)[w].tasks.set(t,new c.LottiePlayerEventTask(t,(t=>{(0,i._)(this,x)[x](e),this.dispatchEvent(e,t)})))}function H(){(0,i._)(this,y)[y]||((0,i._)(this,y)[y]=!0,(0,i._)(this,m)[m].remove(),this.removeEventListeners(),(0,i._)(this,w)[w].tasks.forEach((e=>{(0,f.isPlayerEvent)({event:e,player:this})&&(0,i._)(this,w)[w].tasks.delete(e.taskUID)})),(0,i._)(this,k)[k].strictCache||a.LottieDataCache.outdate((0,i._)(this,k)[k].animationUrl))}Object.defineProperty(G,g,{writable:!0,value:["ready","destroy","firstFrame","loopComplete","enterFrame"]})},157951:(e,t,s)=>{s.d(t,{LottiePlayerDirection:()=>i});var i=function(e){return e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD",e}({})},273808:(e,t,s)=>{function i({event:e,player:{id:t}}){return`${e}${t}`}s.d(t,{getPlayerEventId:()=>i})},908575:(e,t,s)=>{function i({event:e,player:t}){return e.taskUID.endsWith(t.id)}s.d(t,{isPlayerEvent:()=>i})},150195:(e,t,s)=>{function i(e){const{paddingTop:t,paddingBottom:s,paddingLeft:i,paddingRight:r,borderTopWidth:n,borderBottomWidth:a,borderLeftWidth:c,borderRightWidth:o}=getComputedStyle(e),d=parseInt(i)+parseInt(r),l=parseInt(t)+parseInt(s),u=parseInt(c)+parseInt(o),h=parseInt(n)+parseInt(a);return{width:Math.trunc(parseInt(e.style.width)||e.clientWidth-d-u||e.offsetWidth)||0,height:Math.trunc(parseInt(e.style.height)||e.clientHeight-l-h||e.offsetHeight)||0}}s.d(t,{getElementSize:()=>i})},505471:(e,t,s)=>{s.d(t,{isIntersectionObserverSupported:()=>i});const i="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype},184330:(e,t,s)=>{s.d(t,{isSafari:()=>r});var i=s(958396);const r="safari"in globalThis||i.userAgent&&(/\b(iPad|iPhone|iPod)\b/.test(i.userAgent)||i.userAgent.match("Safari")&&!i.userAgent.match("Chrome"))},488577:(e,t,s)=>{s.d(t,{isTouchSupported:()=>i});const i="undefined"!=typeof window&&("ontouchstart"in window||"DocumentTouch"in window)},351901:(e,t,s)=>{s.d(t,{loadThreads:()=>r});var i=s(351118);function r(){return(0,i.asyncImportLoader)((async()=>{const{EsThread:e,Transfer:t}=await Promise.all([s.e(81399),s.e("langs/web/threads-es")]).then(s.bind(s,808849));return{EsThread:e,Transfer:t}}))}},958396:(e,t,s)=>{s.d(t,{userAgent:()=>i});const i="undefined"!=typeof navigator?navigator.userAgent:null}},d={};function __webpack_require__(e){var t=d[e];if(void 0!==t)return t.exports;var s=d[e]={exports:{}};return o[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.m=o,e=[],__webpack_require__.O=(t,s,i,r)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,i,r]=e[d],a=!0,c=0;c<s.length;c++)(!1&r||n>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](s[c])))?s.splice(c--,1):(a=!1,r<n&&(n=r));if(a){e.splice(d--,1);var o=i();void 0!==o&&(t=o)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,i,r]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};t=t||[null,s({}),s([]),s(s)];for(var a=2&i&&e;"object"==typeof a&&!~t.indexOf(a);a=s(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,s)=>(__webpack_require__.f[s](e,t),t)),[])),__webpack_require__.u=e=>61037===e?"web/chunks/grip-lib.e290cff5.js":76573===e?"web/chunks/2f5bcbf8.async.b5bb275d.js":30072===e?"web/chunks/showCaptchaPopup.07eed387.js":32466===e?"web/chunks/d115b1ed.async.55dd80d9.js":6864===e?"web/chunks/cd42e16f.async.cd3dec79.js":79144===e?"web/chunks/61d77ba9.async.add6e5ea.js":51490===e?"web/chunks/showCaptchaSDK.88e4e07c.js":21358===e?"web/chunks/cee2b1c4.async.589a4406.js":21472===e?"web/chunks/3644232a.async.8ef54d73.js":68254===e?"web/chunks/32fb6d6d.async.7cb953ae.js":84287===e?"web/chunks/f03da3d9.async.25ec6183.js":22801===e?"web/chunks/db3c5e15.async.61dee495.js":13542===e?"web/chunks/nav.f7ade022.js":81399===e?"web/chunks/threads-es.ce40a11c.js":31779===e?"web/chunks/f9f29965.async.d1dfd03f.js":55383===e?"web/chunks/559b34a3.async.350d1995.js":16184===e?"web/chunks/335bac60.async.07856a88.js":52007===e?"web/chunks/gift-modal-legacy.59d37d9d.js":23666===e?"web/chunks/rlottie.7fbb79b0.js":33651===e?"web/chunks/b90899e8.async.723f1ace.js":81652===e?"web/chunks/b962db66.async.d35699f6.js":52731===e?"web/chunks/stickers-layer-view.c55c1cba.js":16846===e?"web/chunks/stickers-layer-purchase-details-view.fbdeb36a.js":64273===e?"web/chunks/stickers-random-selector-view.5187b994.js":12318===e?"web/chunks/stickers-random-selector-packs-view.0320b97e.js":71409===e?"web/chunks/stickers-random-selector-result-view.403e041e.js":24639===e?"web/chunks/plugins_maps_mmrgl_script_chunk.e5fd914b.js":30685===e?"web/chunks/plugins_maps_mmrgl_style_chunk.961eadc7.js":8870===e?"web/chunks/hls_lib.c0100db1.js":96239===e?"web/chunks/6712e253.async.7ff99185.js":77474===e?"web/chunks/5149ea20.async.aee73b5d.js":13625===e?"web/chunks/beb65620.async.8007717a.js":91696===e?"web/chunks/daa1f875.async.a01895c9.js":34190===e?"web/chunks/audio_config_legacy.c64fd0fb.js":82438===e?"web/chunks/audio_config_audioAdvertisingBannerViewModelProvider.8cb967b6.js":43925===e?"web/chunks/91d2d8ce.async.9370fdd4.js":60585===e?"web/chunks/ff8a6c31.async.b0ce3984.js":28131===e?"web/chunks/56227a32.async.3e8cafb9.js":21426===e?"web/chunks/ae1a8c88.async.f22e4fb6.js":57859===e?"web/chunks/15877459.async.aa0fbdf7.js":15718===e?"web/chunks/09f5fc3e.async.0caba9a1.js":92977===e?"web/chunks/69a79cb1.async.1dc7ea4e.js":20089===e?"web/chunks/31025993.async.20944bd1.js":18586===e?"web/chunks/audio_config_overrides.88f7cd7c.js":28365===e?"web/chunks/749b661c.async.f0239f56.js":98271===e?"web/chunks/audio_web_globalPlayerImpl.8aaa0a91.js":6827===e?"web/chunks/podcasts_web.40954517.js":53297===e?"web/chunks/91d049b1.async.d6a18e8e.js":88651===e?"web/chunks/bookmarkClipPost.e5b319ea.js":13901===e?"web/chunks/e6bd1c98.async.c72424eb.js":4422===e?"web/chunks/34ba809f.async.87e02c8b.js":4885===e?"web/chunks/4ddc2c77.async.25c6d893.js":60778===e?"web/chunks/459ffa8d.async.aafb621a.js":84835===e?"web/chunks/unauth_action_box.088dbd73.js":19072===e?"web/chunks/left_menu_store.79a1131b.js":97126===e?"web/chunks/WebDI.f301a714.js":14801===e?"web/chunks/WebLayers.135b788f.js":15062===e?"web/chunks/3437339a.async.c6586d7a.js":6003===e?"web/chunks/a16d1efb.async.ca10635a.js":81690===e?"web/chunks/380218b5.async.18541916.js":40222===e?"web/chunks/7307d950.async.f794e833.js":30159===e?"web/chunks/cbae66cf.async.3da27734.js":51943===e?"web/chunks/VideoUpload.c995fd24.js":26033===e?"web/chunks/e4d93263.async.82e71146.js":26907===e?"web/chunks/2da32626.async.536181e2.js":24794===e?"web/chunks/674608e7.async.0ee29ecc.js":52262===e?"web/chunks/b8c7894f.async.e7ceb485.js":3184===e?"web/chunks/b1eb5e9f.async.37fd021f.js":94151===e?"web/chunks/7ff7f0fd.async.4712ccce.js":88345===e?"web/chunks/4c87f851.async.e9006ea4.js":35546===e?"web/chunks/6a385253.async.6c8a6a67.js":76660===e?"web/chunks/6fb64a71.async.63c21dec.js":84039===e?"web/chunks/ad1df6db.async.e70a8a84.js":15402===e?"web/chunks/fe467238.async.baf24404.js":87921===e?"web/chunks/4982bd0a.async.3ebef59b.js":8649===e?"web/chunks/b390d1dc.async.81d79d4e.js":30643===e?"web/chunks/607f3c12.async.225231b9.js":35755===e?"web/chunks/0b817105.async.05b2b5f4.js":63836===e?"web/chunks/MessengerClipsModal.b28097b9.js":69252===e?"web/chunks/cc82796c.async.47ae7461.js":50453===e?"web/chunks/web_nav_AudioPlayer.3572d19c.js":42255===e?"web/chunks/wikiModalExampleInitiator.0d6394c9.js":56965===e?"web/chunks/stories_web_lib.46edacfe.js":53927===e?"web/chunks/questions_boxes_web.ed4d239d.js":74336===e?"web/chunks/show_audio_playlist.3c8040f2.js":39660===e?"web/chunks/b2465e52.async.0c54af80.js":63301===e?"web/chunks/ade4828f.async.5b8494ad.js":90028===e?"web/chunks/2c8fae97.async.b7ef7844.js":10774===e?"web/chunks/show_attachment_audio_list.240de21a.js":17895===e?"web/chunks/money_transfer_box.6c0140e8.js":50905===e?"web/chunks/money_transfer.fd5ee10b.js":68425===e?"web/chunks/sticker-gift-modal-legacy.fbdac022.js":2166===e?"web/chunks/showDonutSubscriptionModal.b83f6550.js":4752===e?"web/chunks/c4851f31.async.d69b97f4.js":29311===e?"web/chunks/feed-client-nav-skeleton.e75a1812.js":56091===e?"web/chunks/feed-client-nav-async-right-block.d99401bf.js":26731===e?"web/chunks/im_chat_preview.bd10cd54.js":94160===e?"web/chunks/75f64ad0.async.4b52467b.js":36502===e?"web/chunks/NewStickerPicker.7950aa84.js":67765===e?"web/chunks/902daeb5.async.e119d786.js":52714===e?"web/chunks/9ce054b5.async.d8c69df2.js":88588===e?"web/chunks/1f1f4792.async.ad99a50f.js":3841===e?"web/chunks/297e03c9.async.ea267155.js":75908===e?"web/chunks/6016368a.async.07e07973.js":33641===e?"web/chunks/audio_modals_MusicTrackList.ba15f689.js":1715===e?"web/chunks/AudioLongtapModal.a76b10b7.js":4871===e?"web/chunks/web_audio_AnyAudioLegacyService.4d1925ef.js":65673===e?"web/chunks/7b0195bf.async.0f478145.js":31095===e?"web/chunks/PodcastEpisodeModal.eb3a95ab.js":62229===e?"web/chunks/z_nav.a3696b2c.js":20781===e?"web/chunks/tutorial.b826ca3e.js":99370===e?"web/chunks/VideoEditorModal.a4fc5294.js":95805===e?"web/chunks/PublishClipToVideoModal.25c488c4.js":60127===e?"web/chunks/1e060051.async.17968a01.js":3705===e?"web/chunks/65b7f152.async.06c74c8e.js":61332===e?"web/chunks/fa48ade2.async.14e2bc3a.js":91906===e?"web/chunks/VideoUploadModal.d77c3adc.js":74205===e?"web/chunks/VideoExternalUploadModal.2e937fb5.js":36637===e?"web/chunks/ClipUploadModal.63fe4238.js":75090===e?"web/chunks/video_upload_modal.cd41978e.js":18493===e?"web/chunks/AddClipToVideoBlock.92e30364.js":56099===e?"web/chunks/OpenNewVideoEditorButton.3e1ee64e.js":6694===e?"web/chunks/menu_settings.ed42b0fd.js":99907===e?"web/chunks/04e1eb45.async.a282bb0a.js":52060===e?"web/chunks/16b49a2b.async.3d249c74.js":59933===e?"web/chunks/ReportMiniApp.21725171.js":66434===e?"web/chunks/ReportsProfileModal.4dcf3c4c.js":99595===e?"web/chunks/ReportForm.d99851f7.js":73214===e?"web/chunks/SilentModeForms.03437c14.js":12477===e?"web/chunks/OnboardingTooltipMarker-1.8b4efdb3.js":25126===e?"web/chunks/OnboardingTooltipMarker-2.82800be7.js":89519===e?"web/chunks/OnboardingTooltipMarker-3.2f93e038.js":80496===e?"web/chunks/OnboardingTooltipMarker-4.ea0bbc95.js":93305===e?"web/chunks/OnboardingTooltipMarker-5.f7e7d7db.js":6114===e?"web/chunks/OnboardingTooltipMarker-6.48d9f311.js":87752===e?"web/chunks/491b1a10.async.d080974e.js":10085===e?"web/chunks/d178bdeb.async.19290b71.js":42920===e?"web/chunks/365e96e2.async.7598905a.js":52318===e?"web/chunks/20efbaf9.async.4eebe4be.js":95885===e?"web/chunks/45e0162e.async.7b0f8355.js":73810===e?"web/chunks/0ca398f5.async.efb7a01e.js":99056===e?"web/chunks/VideoShareModal.26a52741.js":25153===e?"web/chunks/"+e+".35b53cd8.js":65852===e?"web/chunks/7a162ebe.async.4c3022d4.js":90874===e?"web/chunks/"+e+".2ac3b8fc.js":25817===e?"web/chunks/"+e+".90f724a2.js":58240===e?"web/chunks/"+e+".55d2b301.js":34517===e?"web/chunks/15e40cc3.async.0bc9cc89.js":43162===e?"web/chunks/framer-motion-entrypoint.e7eaa013.js":50756===e?"web/chunks/sticker.746bfe4e.js":47135===e?"web/chunks/audio_onMediaAttachmentPlayer.22fb154c.js":69240===e?"web/chunks/audio_postingPlayer.6b22916f.js":12334===e?"web/chunks/stories-perf-metrics.ff7ed74a.js":86127===e?"web/chunks/cbaf9919.async.293e1771.js":72955===e?"web/chunks/2f87624e.async.2a6e6295.js":23227===e?"web/chunks/93dfe63d.async.20c2a579.js":7323===e?"web/chunks/4d6dd7d7.async.843ea278.js":81505===e?"web/chunks/9d6b2984.async.9b3a5677.js":80111===e?"web/chunks/4d5dabf2.async.d33a8147.js":46084===e?"web/chunks/4a1950da.async.181f33bb.js":22834===e?"web/chunks/35e2997e.async.cf429bbd.js":2163===e?"web/chunks/897797b7.async.9ae16945.js":98576===e?"web/chunks/dad43139.async.d7510224.js":60191===e?"web/chunks/stories_viewer.16159309.js":54833===e?"web/chunks/performance-stats.2f712780.js":9635===e?"web/chunks/9635.550c19a0.js":71011===e?"web/chunks/4f2708c4.async.bf21bb3c.js":32643===e?"web/chunks/story_blocks.99a6a15f.js":7894===e?"web/chunks/StickersKit-AgeRestrictionModal.7fc4cfc1.js":8559===e?"web/chunks/ExitConfirmationModal.027362e0.js":56560===e?"web/chunks/CreateVideoChannelModal.365fd12c.js":40953===e?"web/chunks/AddClipToVideoModal.a33de323.js":60274===e?"web/chunks/ClipPlayerModule.53c5b4cb.js":43451===e?"web/chunks/MiniAppService_MiniApp.bb669d72.js":36182===e?"web/chunks/66a232f7.async.8219f1e9.js":96374===e?"web/chunks/storyPublisher.1b908b09.js":5333===e?"web/chunks/stories-editor-fonts.5cff632e.js":22698===e?"web/chunks/web_index.a1a938b6.js":73538===e?"web/chunks/video_restore_button.6180dc0d.js":16673===e?"web/chunks/CatalogSnackbar.87657a14.js":70466===e?"web/chunks/d4e0cabb.async.e5b3541a.js":11635===e?"web/chunks/572c25f6.async.726911e6.js":30359===e?"web/chunks/862400cc.async.d51aa79f.js":34767===e?"web/chunks/NewVideoEditModal.a7cd8ccc.js":76376===e?"web/chunks/renderPlayerOverlay.2c32c272.js":25700===e?"web/chunks/narratives_boxes.81ea7c1d.js":74558===e?"web/chunks/NarrativesListModelOpenService.a7395a02.js":53630===e?"web/chunks/VideoChat.8433d455.js":9994===e?"web/chunks/HTMLToImage.b391ad22.js":38308===e?"web/chunks/mvk-logout-modal.868e28f5.js":50915===e?"web/chunks/stories-creator-legacy-modal.66018086.js":61899===e?"web/chunks/interactive_video_onboarding.742bd6de.js":6531===e?"web/chunks/4065cb3c.async.77303554.js":80364===e?"web/chunks/a939d928.async.421eca5e.js":54790===e?"web/chunks/5e24fd7d.async.e6ce8208.js":64497===e?"web/chunks/LiveInfo.b871004f.js":73520===e?"web/chunks/ab7be8a3.async.95961c60.js":28458===e?"web/chunks/1c7242c3.async.c4bc9f5b.js":90513===e?"web/chunks/videoplayer_interactives.2cb56833.js":87807===e?"web/chunks/videoplayer_v3.2c0e6aeb.js":6885===e?"web/chunks/handleToggleFavorite.fee93857.js":59039===e?"web/chunks/audio_mobile_globalPlayerImpl.ea25d16d.js":71393===e?"web/chunks/stories-creator-ord-app.9ed53b0e.js":74074===e?"web/chunks/SuggestionsOverlayRender.2ac026d3.js":7997===e?"web/chunks/helpHintsService.c9fe74f1.js":75477===e?"chunks/"+e+".3879d2ca.js":30420===e?"chunks/"+e+".4dc53689.js":{17356:"web/chunks/videoplayer-interactive",63616:"web/chunks/draggable",79210:"web/chunks/audioplayer-lib"}[e]+"."+{17356:"c4daf512",63616:"7f6fddff",79210:"6366e2dd"}[e]+".js",__webpack_require__.miniCssF=e=>30072===e?"web/chunks/ecf4ba8e.css":23666===e?"web/chunks/83a662dc.css":52731===e?"web/chunks/c431e81d.css":16846===e?"web/chunks/246c268d.css":64273===e?"web/chunks/46f2caa3.css":12318===e?"web/chunks/6619d22c.css":71409===e?"web/chunks/ac285b60.css":30685===e?"web/chunks/d5a750da.css":{18586:1,98271:1,6827:1,33641:1}[e]?"web/chunks/8d78121f.css":{84835:1,22698:1}[e]?"web/chunks/49041bdf.css":51943===e?"web/chunks/3fb10e4d.css":63836===e?"web/chunks/278871e1.css":{29311:1,56091:1}[e]?"web/chunks/8137de07.css":36502===e?"web/chunks/8a613c7b.css":1715===e?"web/chunks/af9fae26.css":99370===e?"web/chunks/b39ce11d.css":95805===e?"web/chunks/454f4a27.css":73509===e?"web/chunks/823f521d.css":{91906:1,74205:1}[e]?"web/chunks/86351b6a.css":36637===e?"web/chunks/278711c3.css":75090===e?"web/chunks/66cefbe1.css":18493===e?"web/chunks/ca77e6f3.css":6694===e?"web/chunks/d2f54dd7.css":59933===e?"web/chunks/cdf8b535.css":66434===e?"web/chunks/2f796142.css":99595===e?"web/chunks/8fca9d14.css":73214===e?"web/chunks/06964372.css":99056===e?"web/chunks/27c6e5e3.css":50756===e?"web/chunks/b1e34a2b.css":60191===e?"web/chunks/6800a6c0.css":32643===e?"web/chunks/932d514a.css":7894===e?"web/chunks/599c788a.css":40953===e?"web/chunks/b7dcce66.css":60274===e?"web/chunks/d54192df.css":5333===e?"web/chunks/d05ec3bc.css":16673===e?"web/chunks/e971e396.css":28352===e?"web/chunks/chunks/e9d4d821.css":34767===e?"web/chunks/df9c4dfd.css":76376===e?"web/chunks/fb435e99.css":53630===e?"web/chunks/923fc565.css":38308===e?"web/chunks/383d7a32.css":50915===e?"web/chunks/f28493f1.css":64497===e?"web/chunks/86fb7a7f.css":{74998:1,87807:1}[e]?"web/chunks/6ed22658.css":90513===e?"web/chunks/2eb9cd75.css":6885===e?"web/chunks/8f058b71.css":71393===e?"web/chunks/5ce92a9a.css":74074===e?"web/chunks/6f8b8086.css":79210===e?"web/chunks/audioplayer-lib.32aa7a37.css":void 0,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},__webpack_require__.l=(e,t,s,r)=>{if(i[e])i[e].push(t);else{var n,a;if(void 0!==s)for(var c=document.getElementsByTagName("script"),o=0;o<c.length;o++){var d=c[o];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")=="vk:"+s){n=d;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack","vk:"+s),n.src=e),i[e]=[t];var l=(t,s)=>{n.onerror=n.onload=null,clearTimeout(u);var r=i[e];if(delete i[e],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((e=>e(s))),t)return t(s)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=l.bind(null,n.onerror),n.onload=l.bind(null,n.onload),a&&document.head.appendChild(n)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",r=__webpack_require__.u,n=__webpack_require__.e,a={},c={},__webpack_require__.u=function(e){return r(e)+(a.hasOwnProperty(e)?"?"+a[e]:"")},__webpack_require__.e=function(e){return n(e).catch((function(t){var s=c.hasOwnProperty(e)?c[e]:3;if(s<1){var i=r(e);throw t.message="Loading chunk "+e+" failed after 3 retries.\n("+i+")",t.request=i,t}return new Promise((function(t){var i,r=3-s+1;setTimeout((function(){var i="cache-bust=true&retry-attempt="+r;a[e]=i,c[e]=s-1,t(__webpack_require__.e(e))}),(i=r,1e3*Math.pow(3,i)))}))}))},(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,s)=>{var i=__webpack_require__.miniCssF(e),r=__webpack_require__.p+i;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var r=(a=s[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var n=document.getElementsByTagName("style");for(i=0;i<n.length;i++){var a;if((r=(a=n[i]).getAttribute("data-href"))===e||r===t)return a}})(i,r))return t();((e,t,s,i,r)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",__webpack_require__.nc&&(n.nonce=__webpack_require__.nc),n.onerror=n.onload=s=>{if(n.onerror=n.onload=null,"load"===s.type)i();else{var a=s&&s.type,c=s&&s.target&&s.target.href||t,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+c+")");o.name="ChunkLoadError",o.code="CSS_CHUNK_LOAD_FAILED",o.type=a,o.request=c,n.parentNode&&n.parentNode.removeChild(n),r(o)}},n.href=t,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n)})(e,r,null,t,s)})),t={26566:0};__webpack_require__.f.miniCss=(s,i)=>{t[s]?i.push(t[s]):0!==t[s]&&{1715:1,5333:1,6694:1,6827:1,6885:1,7894:1,12318:1,16673:1,16846:1,18493:1,18586:1,22698:1,23666:1,28352:1,29311:1,30072:1,30685:1,32643:1,33641:1,34767:1,36502:1,36637:1,38308:1,40953:1,50756:1,50915:1,51943:1,52731:1,53630:1,56091:1,59933:1,60191:1,60274:1,63836:1,64273:1,64497:1,66434:1,71393:1,71409:1,73214:1,73509:1,74074:1,74205:1,74998:1,75090:1,76376:1,79210:1,84835:1,87807:1,90513:1,91906:1,95805:1,98271:1,99056:1,99370:1,99595:1}[s]&&i.push(t[s]=e(s).then((()=>{t[s]=0}),(e=>{throw delete t[s],e})))}}})(),(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={26566:0};__webpack_require__.f.j=(t,s)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else if(/^(1(2(318|334|477)|3(542|625|901)|5(062|402|718)|6(184|673|846)|7(15|356|895)|0085|0774|1635|4801|8493|8586|9072)|2(1(358|426|472|529|63|66)|2(698|801|834)|3(227|592|666)|4(052|639|794)|5(126|153|700|817)|6(033|566|731|907)|8(131|365|458)|0089|0781|9311)|3(0([13]59|072|643|685)|1(095|779|84)|36[45]1|4(190|517|767)|6(182|502|637)|2466|2643|5546|5755|705|8308|841|9660)|4(3(162|451|925)|(022|42|75)2|(225|713|88)5|0953|2920|6084|871)|5(0(453|560|756|905|915)|2(007|060|262|318|714|731)|3(297|33|630|927)|6(09[19]|560|965)|(149|479|824)0|(194|483|538|993)3|7859|9039)|6(0(03|127|191|274|585|778)|1(037|14|332|899)|3(301|616|836)|5(31|673|852)|8(254|27|425|64|85)|92(40|52)|2229|4273|4497|6434|694|7765)|7(1(011|393|409)|3(214|23|520|538|810)|4(074|205|336|558)|6(2|376|573|660)|9(144|210|97)|0466|2955|5090|5908|7474|894)|8(0(111|364|496)|1(399|505|652|690)|4(039|287|835)|7(752|807|921)|8(345|588|651|70)|9(519|631|887)|2438|5172|559|6127|649)|9(0(028|513|874)|1(498|696|906)|41(51|60)|58[08]5|6(239|35|374)|9(056|370|595|907|94)|2977|3305|7126|8271|8576))$/.test(t)){var r=new Promise(((s,r)=>i=e[t]=[s,r]));s.push(i[2]=r);var n=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(n,(s=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",a.name="ChunkLoadError",a.type=r,a.request=n,i[1](a)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,s)=>{var i,r,[n,a,c]=s,o=0;if(n.some((t=>0!==e[t]))){for(i in a)__webpack_require__.o(a,i)&&(__webpack_require__.m[i]=a[i]);if(c)var d=c(__webpack_require__)}for(t&&t(s);o<n.length;o++)r=n[o],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(d)},s=self.webpackChunkvkweb=self.webpackChunkvkweb||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{var e={},t={podcasts_web:"a2703f6ea9f67727",bookmarkClipPost:"f980fda40f715b2d",WebDI:"061fc26c216c7337",audio_config_legacy:"b7c2f8dcc21dcc4e",audio_config_overrides:"8403bfb5e0530bd9",audio_web_globalPlayerImpl:"f60581a0b0df2bf4",unauth_action_box:"6a9fef28a5f07542",showCaptchaPopup:"efc84820ed8bb89c",showCaptchaSDK:"722622a930e4653e",nav:"f832fd28aa79fc17",left_menu_store:"c9eed939813f6cda",menu_settings:"a8f4f383337e5768",ReportMiniApp:"ce8d98a76a2a3678",ReportsProfileModal:"23579a018d596229",ReportForm:"f3854745714580bd",SilentModeForms:"c62172e8ae356a01",VideoUpload:"1e14c53626b0fa52",MessengerClipsModal:"299318f667a81615",storyPublisher:"ed9421807a6b4284",wikiModalExampleInitiator:"be30e82edc1853fe",stories_web_lib:"aa0cbf3f80409049",show_audio_playlist:"d43416e3e424607e",show_attachment_audio_list:"9e7ca4ce71807e32",money_transfer_box:"ef69c4589df71bb0",money_transfer:"899fd68cc954af25","sticker-gift-modal-legacy":"a980835792b72277","gift-modal-legacy":"5746246ae20fed8b","feed-client-nav-skeleton":"56ba9b41383f23ed","feed-client-nav-async-right-block":"56ba9b41383f23ed",audio_modals_MusicTrackList:"4f343df00c65f37a",AudioLongtapModal:"f39496e0a46ade04",z_nav:"f832fd28aa79fc17",im_chat_preview:"a4e7f074e711c095",NewStickerPicker:"6379dddc9a85b4fa",stories_viewer:"f47191e3c7a0a098",web_index:"59c268fb3966fa6f",VideoShareModal:"8db5fd5461910aa1",CreateVideoChannelModal:"ccf65520b8d2b8b3",ExitConfirmationModal:"c2688b11f2a075fe",VideoEditorModal:"fa1386d0a1195ea5",video_restore_button:"843076f1077dfcbc","stickers-layer-view":"0acaf520f1ad1f0c","stickers-layer-purchase-details-view":"3993231cc38c4b95","stickers-random-selector-view":"d5d14885ce1b5b8c","stickers-random-selector-packs-view":"8f317c4b34e8ed45","stickers-random-selector-result-view":"63bdc729bf5d740e",NewVideoEditModal:"aebca4e64640aae6",renderPlayerOverlay:"b921d4072253289c","framer-motion-entrypoint":"be30e82edc1853fe",story_blocks:"e42c61aaf4a96b92","StickersKit-UGCManagementRestrictedModal":"be30e82edc1853fe","StickersKit-AgeRestrictionModal":"be30e82edc1853fe","StickersKit-ChatRestrictionModal":"be30e82edc1853fe",narratives_boxes:"5b3eff0e8f3340cc",PodcastEpisodeModal:"109769f7f38a3747",interactive_video_onboarding:"b8e7b3942113c871",LiveInfo:"56ae7451c91c32f5",videoplayer_v2:"efdf9d6be41016b5",videoplayer_interactives:"77d2aff185cb7f03",videoplayer_v3:"cb291cb105f4c9b3",handleToggleFavorite:"81a2136719ecee3c",VideoChat:"9833fbe24fed0ccb","stories-creator-legacy-modal":"ac4de67cb3d7d8db",AddClipToVideoModal:"c5f760b8814e4759",ClipPlayerModule:"be30e82edc1853fe",PublishClipToVideoModal:"fd7f38b760e09d53",sharedVideoUploadState:"747835ce8bd36cfc",VideoUploadModal:"3edabc92035763bf",VideoExternalUploadModal:"3edabc92035763bf",ClipUploadModal:"9257b2a36342c75c",video_upload_modal:"32d4d5dd99420fe7",AddClipToVideoBlock:"3db135e76479446f",OpenNewVideoEditorButton:"be085d5a9ba950ca","mvk-logout-modal":"ad34b5b5ba7dfd41",SuggestionsOverlayRender:"827a84505d710168"};__webpack_require__.f.vkLangs=(s,i)=>{if("string"==typeof s&&s.startsWith("langs/web/")){var r=t[s.replace("langs/web/","")];if(r){var n=__webpack_require__.o(e,s)?e[s]:void 0;if(0!==n)if(n)i.push(n[2]);else{var a=new Promise(((t,i)=>n=e[s]=[t,i]));i.push(n[2]=a);var c="?v="+(window.vk&&window.vk.cfg?window.vk.cfg.langs_force_version:0)+"&p=web&l="+window.vk.lang||"",o=self.location.origin+/js/+s+"."+r+".js"+c,d=new Error;__webpack_require__.l(o,(t=>{if(__webpack_require__.o(e,s)&&(0!==(n=e[s])&&(e[s]=void 0),n)){n[0]();var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading lang "+s+" failed.\n("+i+": "+r+")",d.name="LangLoadError",d.type=i,d.request=r,setTimeout((()=>{throw d}),0)}}),"lang-"+s)}}}};var s=self.langChunkLoadingGlobal||(e=>self.addLangKeys(e[1]));self.langChunkLoadingGlobal=((t,s)=>{var[i]=s;t&&t(s),__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0}).bind(null,s)})(),self.__declaredGlobals||(self.__declaredGlobals=new Set),self.__usedGlobals||(self.__usedGlobals={buffered:new Set,bufferedErrors:new Set,add(e){this.buffered.add(e)},addError(e){this.bufferedErrors.add(e)},listen(e){(this.buffered.size||this.bufferedErrors.size)&&e(Array.from(this.bufferedErrors),Array.from(this.buffered));const t=this.add.bind(this),s=this.addError.bind(this);this.add=s=>{e([],[s]),t(s)},this.addError=t=>{e([t],[]),s(t)}}}),__webpack_require__._dG=function(e,t){if(self.partConfigEnabled&&self.partConfigEnabled("global_variable_wrapper")&&!self.__declaredGlobals.has(e)){self.__declaredGlobals.add(e);try{let s=t;Object.defineProperty(self,e,{enumerable:!0,configurable:!0,get:()=>(self.__usedGlobals.add(e),s),set(e){s=e}})}catch(s){self.__usedGlobals.addError(e),window[e]=t}}else window[e]=t;return t};var l=__webpack_require__.O(void 0,[91498,89631,50560,85172,762,21529,23592,89887,24052],(()=>__webpack_require__(363469)));l=__webpack_require__.O(l)})();