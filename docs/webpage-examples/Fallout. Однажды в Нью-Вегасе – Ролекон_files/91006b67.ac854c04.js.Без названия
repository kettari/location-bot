try{(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[24052],{50790:(e,t,n)=>{n.d(t,{useIsMounted:()=>r});var o=n(296540);const r=()=>{const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,o.useCallback)((()=>e.current),[])}},732061:(e,t,n)=>{n.d(t,{AnimationLayer:()=>s});var o=n(474848),r=n(296540),i=n(970704),a=n(9320);const s=({layer:e,animationState:t,onAnimationPlayBackAreaLoaded:n,onAnimationPlayBackAreaFinished:s,...l})=>{const p=(0,i.isMainAnimationLayout)(e),[c,d]=(0,r.useState)(!1);return c?null:(0,o.jsx)(o.Fragment,{children:p&&(0,o.jsx)(a.MainAnimationLayout,{layer:e,onFirstFrameRender:()=>{t.markStateAsPlaying()},onAnimationLoaded:()=>{n(),t.markStateAsLoaded()},onLayerLoopCompleted:()=>{c||(s(),t.markStateAsFinished(),d(!0))},...l})})}},863826:(e,t,n)=>{n.d(t,{LottiePlayer:()=>y});var o=n(474848),r=n(327813),i=n(456921),a=n(351118),s=n(812153),l=n(296540),p=n(761894),c=n(970704),d=n(808586),u=n(648214);const y=(0,i.observer)((({layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:y})=>{const{popupStore:E}=(0,d.usePopupStickerWithError)(),h=(0,l.useRef)(0),P=(0,l.useRef)(!1),{isPlaying:m,onAnimationClick:A,lottiePlayer:{options:L}}=E,{onLottiePlayerError:_}=E.errorHandlers,{lottieContainerRef:S,lottiePlayerRef:T,lottieLoaded:R,lottieRendered:O,lottieErrorMessage:f}=(0,s.useLottie)({group:p.POPUP_LOTTIE_GROUP,animationUrl:e.url,...L},{play:m}),I=()=>{P.current||(y(),P.current=!0)};return(0,l.useEffect)((()=>{const e=T.current;e&&e.setOptions(L)}),[L]),(0,l.useEffect)((()=>{f&&(e=>{_?.(e),I()})(f)}),[f,_]),(0,l.useEffect)((()=>{const e=T.current;if(e)return n&&e.addEventListener("ready",n,{once:!0}),i&&e.addEventListener("firstFrame",i,{once:!0}),()=>{i&&e.removeEventListener("firstFrame",i),n&&e.removeEventListener("ready",n)}}),[R]),(0,l.useEffect)((()=>{const e=T.current;if(e)return e.addEventListener("destroy",I,{once:!0}),()=>{P.current&&e.removeEventListener("destroy",I)}}),[O]),(0,l.useEffect)((()=>{const t=T.current;if(!t)return;const n=(0,c.getAnimationLayerLoopsLimit)(e),o=()=>{if(h.current+=1,h.current===n)return I(),void t.removeEventListener("loopComplete",o)};return t.addEventListener("loopComplete",o),()=>{t.removeEventListener("loopComplete",o)}}),[R]),(0,o.jsx)("div",{onClick:e=>{A?.(e)},className:(0,a.classNames)(u.default.wrapper,{[u.default.wrapperClickable]:Boolean(A)&&L.speed!==p.SPEED_ON_DESTROY}),style:(0,r.toJS)(t),ref:S})}))},9320:(e,t,n)=>{n.d(t,{MainAnimationLayout:()=>i});var o=n(474848),r=n(863826);const i=({layer:e,popUpLayerStyle:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:a})=>(0,o.jsx)(r.LottiePlayer,{layer:e,style:t,onAnimationLoaded:n,onFirstFrameRender:i,onLayerLoopCompleted:a})},833045:(e,t,n)=>{n.d(t,{NonAnimationLayer:()=>l});var o=n(474848),r=n(296540),i=n(970704),a=n(280501),s=n(674109);const l=({layer:e,parentState:t,popUpLayerStyle:n,popUpLayerStyleData:l})=>{const p=(0,i.isGradientLayer)(e),c=(0,i.isBackgroundLayer)(e),[d,u]=(0,r.useState)(!t);return(0,r.useEffect)((()=>{if(!t)return;const e=()=>{u(!1)},n=()=>{u(!0)};return t.listenable.once("onPlaying",n),t.listenable.once("onFinished",e),()=>{t.listenable.off("onPlaying",n),t.listenable.off("onFinished",e)}}),[]),d?(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)(a.GradientLayer,{popUpLayerStyle:n,popUpLayerStyleData:l}),c&&(0,o.jsx)(s.BackgroundLayer,{popUpLayerStyle:n})]}):null}},674109:(e,t,n)=>{n.d(t,{BackgroundLayer:()=>i});var o=n(474848),r=n(7279);const i=({popUpLayerStyle:e})=>(0,o.jsx)("div",{className:r.default.wrapper,style:e})},280501:(e,t,n)=>{n.d(t,{GradientLayer:()=>s});var o=n(474848),r=n(887326),i=n(15978),a=n(228679);const s=({popUpLayerStyle:e,popUpLayerStyleData:t})=>{const n={...e,"--gradient-color":(0,r.useAppearanceDetector)()===i.Appearance.DARK?"rgba(0, 0, 0, 0.40)":"var(--white_alpha40)"};return(0,o.jsx)("div",{style:n,className:t?.isRadialGradient?a.default.wrapperWithRadialGradient:a.default.wrapperWithLinearGradient})}},338611:(e,t,n)=>{n.d(t,{PlayBackArea:()=>p});var o=n(474848),r=n(327813),i=n(732061),a=n(833045),s=n(970704),l=n(438185);const p=({layer:e,popUpLayerStyle:t,animationState:n,onAnimationPlayBackAreaFinished:p,onAnimationPlayBackAreaLoaded:c,style:d,popUpLayerStyleData:u,...y})=>{const E=(0,s.isAnimationLayer)(e);return(0,o.jsx)("div",{className:l.default.wrapper,style:(0,r.toJS)(d),...y,children:(0,o.jsxs)("div",{className:l.default.area,children:[E&&n&&(0,o.jsx)(i.AnimationLayer,{layer:e,animationState:n,popUpLayerStyle:t,onAnimationPlayBackAreaLoaded:c,onAnimationPlayBackAreaFinished:p}),!E&&(0,o.jsx)(a.NonAnimationLayer,{layer:e,parentState:n,popUpLayerStyle:t,popUpLayerStyleData:u})]})})}},716253:(e,t,n)=>{n.d(t,{PopUpPortal:()=>u});var o=n(474848),r=n(327813),i=n(440961),a=n(296540),s=n(456921),l=n(338611),p=n(808586),c=n(970704),d=n(761894);const u=(0,s.observer)((({portalElement:e=document.body})=>{const t=(0,a.useRef)(0),n=(0,a.useRef)(0),{popupStore:s}=(0,p.usePopupStickerWithError)(),u=s.playBackAreasProps.filter((({layer:e})=>(0,c.isAnimationLayer)(e))).length,y=()=>{t.current++,t.current===u&&(t.current=0,n.current=0,s.onEndPlay?.())},E=()=>{n.current++,n.current===u&&s.startPlay()};if(!s.playBackAreasProps.length)return null;const h=(0,r.toJS)(s.playBackAreasProps).map((({style:e,popUpLayerStyle:t,...n},i)=>(0,o.jsx)(l.PlayBackArea,{onAnimationPlayBackAreaLoaded:E,onAnimationPlayBackAreaFinished:y,popUpLayerStyle:(0,r.toJS)(t),style:(0,r.toJS)({...e,transition:s.isFinishing?`opacity ${d.DESTROY_ANIMATION_DURATION}ms`:e?.transition??"",opacity:s.isFinishing?"0":e?.opacity??""}),...n},i)));return(0,i.createPortal)(h,e||document.body)}))},609969:(e,t,n)=>{n.d(t,{PopupProvider:()=>s});var o=n(474848),r=n(296540),i=n(808586),a=n(312459);const s=({popupStore:e,children:t})=>{const n=(0,r.useRef)(e??new a.PopupStickerService);return(0,o.jsx)(i.PopupContext.Provider,{value:{popupStore:n.current},children:t})}},808586:(e,t,n)=>{n.d(t,{PopupContext:()=>r,usePopupSticker:()=>a,usePopupStickerWithError:()=>i});var o=n(296540);const r=(0,o.createContext)(null);function i(){const e=(0,o.useContext)(r);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function a(){const e=(0,o.useContext)(r);return null===e?{popupStore:void 0}:e}},761894:(e,t,n)=>{n.d(t,{ANIMATION_DEDUCTIBLE_DATA_PROPERTY:()=>y,CONTAINER_ID_DATASET_PROPERTY:()=>l,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>i,CONTAINER_ID_DATA_PROPERTY:()=>s,ConflictActionsTypes:()=>v,CustomPopUpLayerTypes:()=>S,DEDUCTIBLE_DATA_PROPERTY:()=>d,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>u,DEFAULT_LOOP_LIMIT:()=>R,DEFAULT_PLAYER_OPTIONS:()=>A,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>E,DEFAULT_POSITION_X:()=>f,DEFAULT_POSITION_Y:()=>I,DEFAULT_SCALE_RATIO:()=>O,DESTROY_ANIMATION_DURATION:()=>k,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>c,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>a,MIN_SIZE_FOR_PLAY:()=>g,MIN_SIZE_FOR_SCALE:()=>D,POPUP_LOTTIE_GROUP:()=>C,POPUP_POSITION_DEFAULT_VALUE:()=>P,POPUP_POSITION_PROPERTY:()=>h,POPUP_STICKER_IM_CONTAINER:()=>p,PopUpLayerTypes:()=>_,PopUpPositionTypes:()=>T,SCREEN_MODIFICATOR:()=>m,SPEED_ON_DESTROY:()=>L});var o=n(157951),r=n(351089);const i="common_container",a="body",s="data-popup-sticker-container-id",l=(0,r.dataAttrKeyToDatasetKey)(s),p="popup-sticker-im-container",c="data-popup-sticker-full-screen-container",d="data-popup-sticker-deductible",u="data-popup-sticker-deductible-full-screen",y="data-popup-sticker-animation-deductible",E="data-popup-sticker-use-common",h="data-popup-sticker-position",P="fixed",m="screen",A={speed:1,loop:!0,autoplay:!1,cache:!1,lazyLoading:!0,direction:o.LottiePlayerDirection.FORWARD,strictCache:!0},L=3,_={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},S={Background:"background"},T={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},R=1,O=1,f="center",I="middle",D=384,g=64,C="Popup",v={ChangeModificator:"changeModificator",DontShow:"dontShow"},k=300},459126:(e,t,n)=>{n.d(t,{AnimationState:()=>d});var o=n(434518),r=n(763812),i=n(584053);const a="preparing",s="loaded",l="playing",p="finished";var c=(0,r._)("_status");class d extends i.Emitter{get status(){return(0,o._)(this,c)[c]}constructor(){super(),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,c)[c]=a,this.markStateAsLoaded=()=>{(0,o._)(this,c)[c]=s,this.emit("onLoaded")},this.markStateAsPlaying=()=>{(0,o._)(this,c)[c]=l,this.emit("onPlaying")},this.markStateAsFinished=()=>{(0,o._)(this,c)[c]=p,this.emit("onFinished")}}}},129116:(e,t,n)=>{n.d(t,{checkPositionConflict:()=>a});var o=n(970704),r=n(175444),i=n(761894);const a=(e,{bottom:t,right:n,top:a,left:s},l)=>{const p={...l};for(const c of e){if(c.popUpPositions&&!c.popUpPositions.includes((0,r.getPopUpPositionType)(l)))continue;const e=document.querySelector(c.blockSelector);if(!e)continue;const d=e.getBoundingClientRect();if(s<=d.right&&n>=d.left&&a<=d.bottom&&t>=d.top)return c.action===i.ConflictActionsTypes.DontShow?null:(0,o.changeLayerPosition)(p)}return p}},251242:(e,t,n)=>{n.d(t,{createDestroyListeners:()=>o,setDestroyListeners:()=>r});const o=e=>{const t=e=>{document.removeEventListener("wheel",e),document.removeEventListener("touchmove",e),window.removeEventListener("resize",e)},n=()=>{t(n),e()};return{addDestroyListener:()=>{document.addEventListener("wheel",n,{once:!0}),document.addEventListener("touchmove",n,{once:!0}),window.addEventListener("resize",n,{once:!0})},removeDestroyListener:t.bind(void 0,n),handleDestroy:n}},r=(e,t)=>({...e,onEndPlay:()=>{t.removeDestroyListener(),e.onEndPlay?.()},onEndPrepare:n=>{n&&t.addDestroyListener(),e.onEndPrepare?.(n)},onAnimationClick:n=>{t.handleDestroy(),e.onAnimationClick?.(n)}})},686933:(e,t,n)=>{n.d(t,{getAnimationAreaStyle:()=>i});var o=n(761894),r=n(970704);const i=({width:e,height:t},n,i)=>{const a={...i},{position_y:s,position_x:l}=(0,r.getAnimationLayerPosition)(n),p=l.replace(o.SCREEN_MODIFICATOR,"").trim(),c=s.replace(o.SCREEN_MODIFICATOR,"").trim();return a.position="absolute","center"===p?(a.left=.5*e,a.transform="translateX(-50%)"):a.left="left"===p?0:e-parseInt(a.width),"middle"===c?(a.top=.5*t,a.transform="translateY(-50%)"):a.top="top"===c?0:t-parseInt(a.height),"middle"===c&&"center"===p&&(a.transform="translate(-50%, -50%)"),a}},16880:(e,t,n)=>{n.d(t,{getBasePropsForPlaybackAreas:()=>d});var o=n(459126),r=n(175444),i=n(679500),a=n(709467),s=n(686933),l=n(129116),p=n(970704);function c(e,t,n,d){const u=!t.animationFooterElement;if((0,p.isGradientLayer)(e)&&u){if(!d)return null;const t={...d.popUpLayerStyle,top:"unset",left:"unset",transform:"unset"},n=(0,a.getGradientAreaStyle)(e,t);return{layer:e,style:d.style,animationState:d.animationState,popUpLayerStyle:n.style,popUpLayerStyleData:n.styleData}}const y=(0,r.getPopUpPositionType)(e),{playBackAreaStyle:E,topByViewport:h}=(0,i.getPlayBackAreaStyle)(y,t,!(0,p.isGradientLayer)(e));if((0,p.isGradientLayer)(e)){if(!d||u)return null;const t=(0,a.getGradientAreaStyle)(e,{height:"100%",width:"100%"});return{layer:e,style:E,animationState:d.animationState,popUpLayerStyle:t.style,popUpLayerStyleData:t.styleData}}if((0,p.isBackgroundLayer)(e))return{layer:e,style:E,popUpLayerStyle:e.style};const P=new o.AnimationState;if((0,p.isBackgroundAnimationLayout)(e))return null;const m=parseInt(E.width),A=parseInt(E.height);let L=Math.min(m,A);const _=(0,p.getAnimationLayerScaleRatio)(e);if((0,p.isCanScale)(L)&&(L*=_),(0,p.isFullScreenLayer)(e)){const e=.5*Math.min(document.documentElement.clientHeight,document.documentElement.clientWidth);L>e&&(L=e)}if(!(0,p.isCanPlay)(L))return null;const S={height:L,width:L},T=(0,s.getAnimationAreaStyle)({width:m,height:A},e,S),R=h+parseInt(T.top),O=h+parseInt(T.left),f=R+L,I=O+L,D=(0,l.checkPositionConflict)(n,{top:R,left:O,bottom:f,right:I},e);return D?(0,p.checkPositionIsEqual)(e,D)?{animationState:P,layer:e,popUpLayerStyle:T,style:E}:c(D,t,[],null):null}const d=({layers:e,popUpElements:t,conflictBlocks:n})=>{const o=[...e].reverse(),r=[];let i=null;for(const e of o){const o=c(e,t,n,i);(0,p.isMainAnimationLayout)(e)&&(i=o),(0,p.isGradientLayer)(e)&&(i=null),o&&r.push(o)}return r.reverse(),r}},693217:(e,t,n)=>{n.d(t,{findFixedElement:()=>s,getDataAttrs:()=>r,getDeductibleDataAttrs:()=>a,getPopupElementsFromFixedElement:()=>p,getStringDataAttrs:()=>i});var o=n(761894);const r=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:n,popupStickerFullScreenContainer:r,popupStickerPosition:i=o.POPUP_POSITION_DEFAULT_VALUE}=e,a={[o.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[o.POPUP_POSITION_PROPERTY]:i,[o.CONTAINER_ID_DATA_PROPERTY]:n};return r&&(a[o.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=r),a},i=e=>{let t="";const n=r(e);return Object.entries(n).forEach((([e,n])=>{t+=`${e}='${n}' `})),t.trim()},a=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:n}=e,r={};return t&&(r[o.DEDUCTIBLE_DATA_PROPERTY]=t),n&&(r[o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=n),r},s=e=>e.closest(`[${o.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function l(e,t,n,r,i,a=null){let s=[...document.querySelectorAll(`[${t}=${r}]`)];switch(i&&(s=[...s,...document.querySelectorAll(`[${t}=${o.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),s.push(n),e){case"lower":case"parent":s=s.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":s=s.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const l=s.findIndex((e=>e===n));let p;switch(e){case"upper":case"parent":p=s[l-1]||null;break;case"lower":p=s[l+1]||null;break;default:p=s[0]||null}return p||a}const p=(e,t)=>{const{popupStickerContainerId:n,popupStickerPosition:r,popupStickerUseCommon:i}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:n=o.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:r=o.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:r,popupStickerUseCommon:t,popupStickerPosition:n}})(e);let a="true"===i;return{fixedElement:e,headerElement:l("upper",o.DEDUCTIBLE_DATA_PROPERTY,t,n,a),footerElement:l("lower",o.DEDUCTIBLE_DATA_PROPERTY,t,n,a),fullScreenElement:l("parent",o.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,n,a,document.body),fullScreenHeaderElement:l("upper",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,a),fullScreenFooterElement:l("lower",o.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,n,a),animationFooterElement:l("lower",o.ANIMATION_DEDUCTIBLE_DATA_PROPERTY,t,n,a),position:r}}},709467:(e,t,n)=>{n.d(t,{getGradientAreaStyle:()=>i});var o=n(761894);const r={bottom:"0deg",left:"90deg",top:"180deg",right:"270deg"},i=({position:e},t)=>{const n={position:"absolute"},i=e.replace(`${o.SCREEN_MODIFICATOR} `,"");return"middle"===i?(n.top="50%",n.left="50%",n.transform="translate(-50%, -50%)",{style:{...t,...n},styleData:{isRadialGradient:!0}}):(["top","bottom"].includes(i)?n.width="100%":n.height="100%",n[i]=0,n["--gradient-deg"]=r[i]||r.top,{style:{...t,...n},styleData:{isRadialGradient:!1}})}},679500:(e,t,n)=>{n.d(t,{getPlayBackAreaStyle:()=>r});var o=n(761894);function r(e,{fullScreenHeaderElement:t,fullScreenFooterElement:n,fullScreenElement:r,fixedElement:i,footerElement:a,headerElement:s,animationFooterElement:l,position:p},c=!1){const d=e===o.PopUpPositionTypes.FullScreen,{top:u,left:y,bottom:E}=r.getBoundingClientRect(),h=d?r:i,{top:P,bottom:m,left:A,width:L}=h.getBoundingClientRect(),{bottom:_}=s?.getBoundingClientRect()||{bottom:-1/0},{bottom:S}=t?.getBoundingClientRect()||{bottom:-1/0},T=Math.max(_,P)<0,R=e===o.PopUpPositionTypes.TopFullScreen||T,O=!d&&!R,f=O?_:S,I=d?n:a,D=I?.getClientRects().length,g=l?.getClientRects().length;let C;C=c&&l&&g?l.getBoundingClientRect().top:I&&D?I.getBoundingClientRect().top:1/0;let v=0;"absolute"===p&&(v=-u);const k=[];f>0&&k.push(v+f),O&&P>=0&&k.push(v+P),u<0&&k.push(v);const U=Math.max(...k,0),F=r===document.body?document.documentElement.clientHeight:function(e){return Math.min(e,document.documentElement.clientHeight)}(E),b=[v+F,h===document.body?document.documentElement.clientHeight:v+m,v+C],N=Math.min(...b)-U,w=function(e){return Math.min(e,document.documentElement.clientWidth)}(L),B=A-y,x={position:p};x.top=`${U}px`,x.left=`${B}px`,x.width=`${w}px`,x.height=`${N}px`;return{playBackAreaStyle:x,topByViewport:U-v}}},175444:(e,t,n)=>{n.d(t,{getPopUpPositionType:()=>i});var o=n(970704),r=n(761894);function i(e){return(0,o.isFullScreenLayer)(e)?r.PopUpPositionTypes.FullScreen:(0,o.isTopFullScreenLayer)(e)?r.PopUpPositionTypes.TopFullScreen:r.PopUpPositionTypes.Fixed}},970704:(e,t,n)=>{n.d(t,{changeLayerPosition:()=>h,checkPositionIsEqual:()=>P,getAnimationLayerLoopsLimit:()=>i,getAnimationLayerPosition:()=>r,getAnimationLayerScaleRatio:()=>a,isAnimationLayer:()=>d,isBackgroundAnimationLayout:()=>p,isBackgroundLayer:()=>l,isCanPlay:()=>A,isCanScale:()=>m,isFullOrPartiallyFullScreenLayer:()=>E,isFullScreenLayer:()=>y,isGradientLayer:()=>s,isMainAnimationLayout:()=>c,isTopFullScreenLayer:()=>u});var o=n(761894);const r=e=>{const{position_x:t,position_y:n}=e;return{position_x:t||o.DEFAULT_POSITION_X,position_y:n||o.DEFAULT_POSITION_Y}},i=e=>{const{loops_limit:t=o.DEFAULT_LOOP_LIMIT}=e;return t},a=e=>{const{scale_ratio:t=o.DEFAULT_SCALE_RATIO}=e;return t},s=e=>e.type===o.PopUpLayerTypes.Gradient,l=e=>e.type===o.CustomPopUpLayerTypes.Background,p=e=>e.type===o.PopUpLayerTypes.FullScreen,c=e=>e.type===o.PopUpLayerTypes.Fixed,d=e=>p(e)||c(e),u=e=>{if(!c(e))return!1;const{position_x:t,position_y:n}=r(e);return!t.includes(o.SCREEN_MODIFICATOR)&&n===`${o.SCREEN_MODIFICATOR} top`},y=e=>{if(l(e)||p(e))return!0;if(s(e))return e.position.includes(o.SCREEN_MODIFICATOR);if(c(e)){const{position_x:t,position_y:n}=r(e);return t.includes(o.SCREEN_MODIFICATOR)&&n.includes(o.SCREEN_MODIFICATOR)}return!1},E=e=>y(e)||u(e),h=e=>{const{position_x:t,position_y:n}=r(e);return E(e)?{...e,position_x:t.replace(`${o.SCREEN_MODIFICATOR} `,""),position_y:n.replace(`${o.SCREEN_MODIFICATOR} `,"")}:{...e,position_x:`${o.SCREEN_MODIFICATOR} ${t}`,position_y:`${o.SCREEN_MODIFICATOR} ${n}`}},P=(e,t)=>d(e)&&d(t)?t.position_y===e.position_y&&e.position_x===t.position_x:!(!s(e)||!s(t))&&t.position===e.position,m=e=>e>=o.MIN_SIZE_FOR_SCALE,A=e=>e>=o.MIN_SIZE_FOR_PLAY},429106:(e,t,n)=>{n.d(t,{PopupAnimationObserver:()=>r});var o=n(351118);class r{createScrollEndHandler(){return(0,o.debounce)((()=>{this.isScrolling=!1,this.observer&&this.isInView&&this.handleObserve()}),this.SCROLL_LISTENER_DELAY)}createObserveEndHandler(){return(0,o.debounce)((e=>{this.isInView=e,this.isInView&&!this.isScrolling&&this.handleObserve()}),this.OBSERVE_LISTENER_DELAY)}addScrollListeners(){document.addEventListener("wheel",this.onScroll,{passive:!0}),document.addEventListener("touchmove",this.onScroll,{passive:!0})}clearScrollListeners(){document.removeEventListener("wheel",this.onScroll),document.removeEventListener("touchmove",this.onScroll)}observe(e,t,n,o){this.callback=t,this.observer?(this.clearObserver(),o!==this.targetId&&this.disconnectCallback?.()):this.addScrollListeners(),this.targetId=o,this.disconnectCallback=n,this.observer=new IntersectionObserver((e=>{const t=e[e.length-1];t&&this.onObserveEnd(t.isIntersecting)}),{rootMargin:"0px",threshold:1}),this.observer.observe(e)}clearObserver(){this.observer?.disconnect(),this.observer=void 0}handleObserve(){this.clearScrollListeners(),this.clearObserver(),this.callback?.(),this.callback=void 0,this.disconnectCallback=void 0}constructor(){this.isScrolling=!1,this.isInView=!1,this.SCROLL_LISTENER_DELAY=1e3,this.OBSERVE_LISTENER_DELAY=500,this.onScrollEnd=this.createScrollEndHandler(),this.onScroll=()=>{this.isScrolling=!0,this.onScrollEnd()},this.onObserveEnd=this.createObserveEndHandler()}}},612517:(e,t,n)=>{n.d(t,{PopupAnimationObserver:()=>c.PopupAnimationObserver,addConflictBlocksNative:()=>y,destroyByRemoveEventNative:()=>h,destroyBySpeedIncrementEventNative:()=>E,destroyWithFadeOutEventNative:()=>P,handlePlayPopUpNative:()=>u});var o=n(474848),r=n(205338),i=n(558137),a=n(716253),s=n(609969),l=n(312459),p=n(761894),c=n(429106);const d=(0,i.makeSharedState)("sticker-popup",(()=>new l.PopupStickerService),{version:2})();function u({stickerElement:e,layers:t,onEndPlay:n,containersIdsToMountIn:i,zIndexMountNode:l,...c}){const u=document.createElement("div");let y;d.prepare({stickerElement:e,layers:t,mountNode:()=>{const t=e.closest(`[${p.CONTAINER_ID_DATA_PROPERTY}]`),n=t??document.body,{popupFullScreenSelector:c=p.FULL_SCREEN_DATA_DEFAULT_VALUE}=n.dataset,E=t?.dataset[p.CONTAINER_ID_DATASET_PROPERTY]&&i?.[t.dataset[p.CONTAINER_ID_DATASET_PROPERTY]],h=E?t:document.querySelector(c)??document.body;E&&(u.style.zIndex=String(l??2),u.style.position="relative"),h.prepend(u),y=(0,r.createRoot)(u),y.render((0,o.jsx)(s.PopupProvider,{popupStore:d,children:(0,o.jsx)(a.PopUpPortal,{portalElement:u})}))},onEndPlay:()=>{n?.(),y?.unmount(),u.remove()},...c})}function y(e){d.conflictBlocks.addConflictBlock(e)}function E(){d.destroyBySpeedIncrement()}function h(){d.destroyByRemove()}function P(){d.destroyWithFadeOut()}},3130:(e,t,n)=>{n.d(t,{LottiePlayer:()=>i});var o=n(327813),r=n(761894);class i{constructor(){this.options={...r.DEFAULT_PLAYER_OPTIONS},this.setOptions=e=>{this.options=e},this.setOption=({key:e,value:t})=>{typeof this.options[e]==typeof t&&(this.options={...this.options,[e]:t})},this.reset=()=>{this.options={...r.DEFAULT_PLAYER_OPTIONS}},(0,o.makeAutoObservable)(this)}}},312459:(e,t,n)=>{n.d(t,{PopupStickerService:()=>d});var o=n(327813),r=n(3130),i=n(493940),a=n(251242),s=n(16880),l=n(693217),p=n(761894),c=n(377803);class d{constructor(){this.isPlaying=!1,this.isPreparing=!1,this.isFinishing=!1,this.playBackAreasProps=[],this.onAnimationClick=null,this.onEndPlay=null,this.onEndPrepare=null,this.errorHandlers={},this.conflictBlocks=new i.PositionConflict,this.lottiePlayer=new r.LottiePlayer,this.setLottiePlayerOptions=e=>{this.isPlaying&&this.lottiePlayer.setOptions(e)},this.setLottiePlayerOption=e=>{this.isPlaying&&this.lottiePlayer.setOption(e)},this.preparePreview=e=>{const t=e.layers.slice();t.unshift({type:p.CustomPopUpLayerTypes.Background,style:{opacity:"0.9",background:c.default.colorBackgroundModal.normal.value}}),this.prepare({...e,layers:t})},this.prepareWithDestroyEvent=e=>{const t=(0,a.createDestroyListeners)(this.destroyWithFadeOut.bind(this));this.prepare((0,a.setDestroyListeners)(e,t))},this.prepare=({layers:e,stickerElement:t,onEndPrepare:n=null,onEndPlay:o=null,onAnimationClick:r=null,errorHandlers:i,mountNode:a,disableHardcodedZIndex:p})=>{if(this.isPlaying||this.isPreparing)throw n?.(!1),new Error("Pop-up stickers are already playing");this.isPreparing=!0;const c=(0,l.findFixedElement)(t),d=(0,l.getPopupElementsFromFixedElement)(c,t),u=(0,s.getBasePropsForPlaybackAreas)({layers:e,popUpElements:d,conflictBlocks:this.conflictBlocks.blocks}).map((e=>({...e,style:{...e.style,zIndex:p?"auto":1001}}))),y=Boolean(u.length),E=()=>{this.reset(),o?.()};this.onEndPrepare=n,this.onEndPlay=E,this.onAnimationClick=r,y&&a?.(),this.playBackAreasProps=u,i&&(this.errorHandlers=i),y||(n?.(!1),E())},this.destroyBySpeedIncrement=()=>{this.setLottiePlayerOption({key:"speed",value:p.SPEED_ON_DESTROY})},this.destroyByRemove=()=>{this.onEndPlay?this.onEndPlay():this.reset()},this.destroyWithFadeOut=()=>{this.isFinishing=!0,setTimeout((()=>{this.destroyByRemove()}),p.DESTROY_ANIMATION_DURATION)},this.startPlay=()=>{this.isPlaying=!0,this.isPreparing=!1,this.onEndPrepare?.(!0)},this.reset=()=>{this.isPlaying=!1,this.isPreparing=!1,this.isFinishing=!1,this.playBackAreasProps=[],this.onEndPlay=null,this.onAnimationClick=null,this.onEndPrepare=null,this.errorHandlers={},this.lottiePlayer.reset()},(0,o.makeAutoObservable)(this)}}},493940:(e,t,n)=>{n.d(t,{PositionConflict:()=>r});var o=n(327813);class r{constructor(){this.blocks=[],this.addConflictBlock=e=>{this.blocks.push(e)},this.removeConflictBlockBySelector=e=>{this.blocks.filter((t=>t.blockSelector===e))},(0,o.makeAutoObservable)(this)}}},351089:(e,t,n)=>{n.d(t,{dataAttrKeyToDatasetKey:()=>o});const o=e=>e.slice(5).split("-").map(((e,t)=>0!==t?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")},648214:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"LottiePlayer__wrapper--Ms640",wrapperClickable:"LottiePlayer__wrapperClickable--UCrtZ"}},7279:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"BackgroundLayer__wrapper--ploOp"}},228679:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapperWithLinearGradient:"GradientLayer__wrapperWithLinearGradient--1RogV",wrapperWithRadialGradient:"GradientLayer__wrapperWithRadialGradient--hFwco"}},438185:(e,t,n)=>{n.d(t,{default:()=>o});const o={wrapper:"PlayBackArea__wrapper--br63f",area:"PlayBackArea__area--A3Vua"}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/91006b67.ac854c04.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/chunks/91006b67.ac854c04.js",e),e}